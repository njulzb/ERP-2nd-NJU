typora-root-url: ..
---

# 软件体系结构设计文档 #


**文档信息：**

这是体系结构的设计文档，修改时记得填写文档信息。

| 版本号   | 人员   | 时间                     | 修改原因                               |
| ----- | ---- | ---------------------- | ---------------------------------- |
| v0.1  | lzb  | 10/11/2017 11:22:20 PM | 文档初稿                               |
| v0.2  | lzb  | 10/13/2017 11:56:27 PM | 模板修改                               |
| v0.21 | lyb  | 10/13/2017 11:56:27 PM | 添加了物理包设计表格                         |
| v0.22 | lyb  | 10/14/2017 9:29:20 PM  | 概要功能设计中去除了stock依赖receipt           |
| v0.3  | lzb  | 10/19/2017 11:13:04 AM | 接口部分（stock）                        |
| v0.4  | mxf  | 10/21/2017 15:42:18 PM | 接口部分（strategy，user，receipt）        |
| v0.5  | hqj  | 10/23/2017 15:42:18 PM | 接口部分（customer，receipt）             |
| v1.0  | lzb  | 2018-1-8 16:50         | 修改了图片，重写了stockbl，userbl，strategybl |



[TOC]


**目录：**


1. 引言
2. 产品概述
3. 逻辑视角
4. 组合视角
5. 接口视角
6. 信息视角


## 1.引言 ##

### 1.1编制目的 ###

本报告详细完成对进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。


### 1.2参考资料 ###

1. 软件体系结构设计文档模板
2. MSCS软件体系结构描述文档 
## 2.产品概述 ##
进销存系统是为灯具照明公司开发的业务系统，开发的目标是用于帮助该公司处理日常的重点业务，包括商品销售、会员发展、库存管理、商品促销、财务管理。

## 3.逻辑视角 ##



在进销存系统中，选择了分层体系结构风格，将系统分为三层（presentation,businesslogic,data)能够很好地示意整个高层抽象。

展示层：包含GUI界面的实现

业务逻辑层：包含业务逻辑处理的实现

数据层：负责数据的持久化和访问


**系统整体概要功能设计：**

| 功能       | 对应逻辑包                                    |
| -------- | ---------------------------------------- |
| stock    | stockui,stockbl,stockdata                                                                         <br/>userbl,userdata |
| receipt  | receiptui,   receiptbl，receiptdata,                                                             <br/>stockbl,stockdata                                                            <br/>userbl,userdata                                                             <br/>customerbl,customerdata                                                            <br/>accountbl,accountdata |
| report   | reportui,reportbl,reportdata                                         <br/>receiptbl，receiptdata, |
| account  | accountui,accountbl,accountdata          |
| user     | userui,userbl,userdata                   |
| strategy | strategyui,strategybl,strategydata,                          <br/>stockbl,stockdata，                                               <br/>receiptbl,receiptdata,                                      <br/>customerbl,customerdata |
| customer | customerui,customerbl,cumtomerdata       |

分层体系结构的逻辑视角和逻辑设计方案如图1和图2







![1_分层风格示意 ](/img/体系结构设计图/1_分层风格示意 .png)











![2_分层包图 ](/img/体系结构设计图/2_分层包图 .png)


## 4.组合视角 ##


### 4.1开发包图 ###
**进销存系统最终的开发包设计如表所示**


| 开发物理包               | 依赖的其他开发包                                 |
| ------------------- | ---------------------------------------- |
| mainUI              | stockUI,receiptUI,reportUI,accountUI,userUI,strategyUI,customerUI |
| stockUI             | stockBLService,vo                        |
| receiptUI           | receiptBLService,vo                      |
| reportUI            | reportBLService,vo                       |
| accountUI           | accountBLService,vo                      |
| userUI              | userBLService,vo                         |
| strategyUI          | strategyBLService,vo                     |
| customerUI          | customerBLService,vo                     |
|                     |                                          |
| stockBLService      | vo                                       |
| receiptBLService    | vo                                       |
| reportBLService     | vo                                       |
| accountBLService    | vo                                       |
| userBLService       | vo                                       |
| strategyBLService   | vo                                       |
| customerBLService   | vo                                       |
|                     |                                          |
| stockBL             | stockBLService,stockDataService,po,utllityBL<br/>userBL |
| receiptBL           | receiptBLService,receiptDataService,po,utllityBL<br/>stockBL,accountBL,userBL |
| reportBL            | reportBLService,reportDataService,po,utilltyBL<br/>receiptBL, |
| accountBL           | accountBLService,accountDataService,po,utllityBL<br/> |
| userBL              | userBLService,userDataService,po,utllityBL<br/> |
| strategyBL          | strategyBLService,strategyDataService,po,utllityBL<br/>stockBL,receiptBL |
| customerBL          | customerBLService,customerDataService,po,utllityBL<br/> |
|                     |                                          |
| stockDataService    | po,JavaRMI                               |
| receiptDataService  | po,JavaRMI                               |
| reportDataService   | po,JavaRMI                               |
| accountDataService  | po,JavaRMI                               |
| userDataService     | po,JavaRMI                               |
| strategyDataService | po,JavaRMI                               |
| customerDataService | po,JavaRMI                               |
|                     |                                          |
| stockData           | stockDataService,Databaseutllity         |
| receiptData         | receiptDataService,Databaseutllity       |
| reportData          | reportDataService,Databaseutllity        |
| accountData         | accountDataService,Databaseutllity       |
| userData            | userDataService,Databaseutllity          |
| strategyData        | strategyDataService,Databaseutllity      |
| customerData        | customerDataService,Databaseutllity      |


**进销存系统客户端开发包图如图3所示**
![3_进销存系统客户端开发包图](/img/体系结构设计图/3_进销存系统客户端开发包图.png)

**进销存系统服务器端开发包图如图4所示**









![4_进销存系统服务器端开发包图](/img/体系结构设计图/4_进销存系统服务器端开发包图.png)

### 4.2运行时进程 ###
在进销存系统中会有多个客户端进程和一个服务器进程，其进程图如图5所示。结合部署图，客户端进程是在客户端机器上运行，服务器进程在服务器端机器上运行

**进程图如图5 所示**





![5_进程图](/img/体系结构设计图/5_进程图.png)


### 4.3 物理部署 ###
进销存系统中客户端构件是在客户端机器上，服务器端构件是在服务器端机器上。在客户端节点上还要部署，RMIStub构件。由于Java RMI 构件属于JDK 6.0的一部分。所以在系统JDK环境以及设置好的情况下，不需要再对了部署。

**部署图如图6所示。**

## 5.接口视角 ##

### 5.1 模块的职责 ###
**客户端模块和服务器模块视图分别如图7和图8所示**



**客户端各层的职责**

| 层     | 职责                     |
| ----- | ---------------------- |
| 启动模块  | 负责初始化网络通信机制，启动用户界面     |
| 展示层   | 基于窗口的进销存客户端用户界面        |
| 业务逻辑层 | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 网络模块  | 利用Java RMI 机制查找RMI 服务  |

**服务器端各层的职责**

| 层    | 职责                            |
| ---- | ----------------------------- |
| 启动模块 | 负责初始化网络通信机制，启动用户界面            |
| 数据层  | 负责数据的持久化，及数据访问接口              |
| 网络模块 | 利用 Java RMI 机制开启RMI服务，注册RMI服务 |

**层之间的接口**

| 接口                                       | 服务调用方 | 服务提供方 |
| ---------------------------------------- | ----- | ----- |
| stockBLService                                                         <br/>receiptBLService                                                                  <br/>reportBLService                                                   <br/>accountBLService                                                    <br/>userBLService                                                       <br/>strategyBLService                                             <br/>customerBLService | 展示层   | 业务逻辑层 |
| stockDataService                                                         <br/>receiptDataService                                                                  <br/>reportDataService                                                   <br/>accountDataService                                                    <br/>userDataService                                                       <br/>strategyDataService                                             <br/>customerDataService | 业务逻辑层 | 数据层   |

### 5.2用户界面层的分解 ###


### 5.3 业务逻辑层的分解 ###
业务逻辑层包括多个针对界面的业务逻辑处理对象。

**业务逻辑层的设计如图9所示**



#### 5.3.1业务逻辑层模块的职责 ####

| 模块         | 职责                  |
| ---------- | ------------------- |
| stockBL    | 负责与库存相关的管理，查看，盘点等服务 |
| receiptBL  | 负责各类单据的生成服务         |
| reportBL   | 负责各类报表的生成服务         |
| accountBL  | 负责银行账户的管理           |
| userBL     | 负责用户的管理，增删改查等服务     |
| strategyBL | 负责促销策略的制定           |
| customerBL | 负责客户管理              |

#### 5.3.2 业务逻辑层模块的接口规范 ####

**stockBL模块的接口规范**

**供接口**

| stock.addGoodsClass          |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public String add(GoodsClassVO newGoodsClass) |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 系统中增加一个商品分类，分类的下级子类初始为空                  |
| **stock.modifyGoodsClass**   |                                          |
| 语法                           | public boolean modify(GoodsClassVO newer) |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 修改该分类的信息，并保存                             |
| **stock.deleteGoodsClass**   |                                          |
| 语法                           | public boolean delete(String id)         |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 找到该分类，并删除该分类，默认连带下级分类一并删除                |
| **stock.getUpperGoodsClass** |                                          |
| 语法                           | public GoodsClassVO getUpper(String id)  |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 返回current分类的父类引用                         |
| **stock.getLowerGoodsClass** |                                          |
| 语法                           | public ArrayList &lt;GoodsClassVO&gt;  getLower(String id) |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current分类的子类信息                         |
| **stock.searchGoodsClass**   |                                          |
| 语法                           | public ArrayList &lt;GoodsVO&gt; search(String name) |
| 前置条件                         | 启动商品分类管理服务                               |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.addGoods**           |                                          |
| 语法                           | public String add(GoodsVO newGoods)      |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 添加商品,保存信息，并自动生成编号                        |
| **stock.modifyGoods**        |                                          |
| 语法                           | public boolean modify(GoodsVO newer)     |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 修改商品信息，并保存，返回是否成功                        |
| **stock.deleteGoods**        |                                          |
| 语法                           | public boolean delete(GoodsVO current)   |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 删除current对应的商品，返回是否成功                    |
| **stock.getUpperGoodsClass** |                                          |
| 语法                           | public GoodsClassVO getUpper(String id)  |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.searchGoods**        |                                          |
| 语法                           | public ArrayList &lt;GoodsVO&gt; search(String nameOrId) |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.lookOver**           |                                          |
| 语法                           | public PortVO lookOver(Date begin,Date end) |
| 前置条件                         | 库存人员登录完毕                                 |
| 后置条件                         | 返回满足时间条件的出入库商品列表                         |
| **stock.examine**            |                                          |
| 语法                           | public SnapshotVO examine()              |
| 前置条件                         | 库存人员登录完毕                                 |
| **stock.toExcel**            |                                          |
| 语法                           | public boolean toExcel(ArrayList<GoodsVO> list) |
| 前置条件                         | 库存人员登录完毕                                 |
| 后置条件                         | 将数据导出到excel中                             |




**需接口**

| 服务名               | 服务            |
| ----------------- | ------------- |
| add goodsclass    | 向数据库中新增商品分类   |
| delete goodsclass | 删除数据库中对应的商品分类 |
| update goodsclass | 更新数据库中对应的商品分类 |
| search goodsclass | 搜索数据库中的商品分类   |
| add goods         | 向数据库中新增商品     |
| delete goods      | 删除数据库中对应的商品   |
| update goods      | 更新数据库中对应的商品   |
| search goods      | 搜索数据库中的商品     |


**receiptBL模块的接口规范**

**供接口**

| receipt.newForm         |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public boolean addForm(FormVO current);  |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 生成新的相应单据并保存                              |
| **receipt.modifyForm**  |                                          |
| 语法                      | public boolean modifyForm(FormVO newer); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 修改相应单据并保存                                |
| **receipt.deleteForm**  |                                          |
| 语法                      | public boolean deleteForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 删除相应单据赠送单                                |
| **receipt.admitForm**   |                                          |
| 语法                      | public boolean admitForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 提交相应单据，变为待审批状态                           |
| **receipt.approveForm** |                                          |
| 语法                      | public boolean approveForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 审批单据，可以改变单据的状态                           |
| **receipt.getForm**     |                                          |
| 语法                      | public FormVO getForm(String id);        |
| 前置条件                    | 开启赠送单服务                                  |
| 后置条件                    | 无                                        |


| receipt.newPresentForm                |                                          |
| ------------------------------------- | ---------------------------------------- |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 生成新的赠送单并保存                               |
| **receipt.modifyPresentForm**         |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 修改赠送单并保存                                 |
| **receipt.deletePresentForm**         |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 删除制定赠送单                                  |
| **receipt.admitPresentForm**          |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 提交赠送单，变为待审批状态                            |
| **receipt.approvePresentForm**        |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 审批赠送单，可以改变单据的状态                          |
| **receipt.getPresentForm**            |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newAlarmForm**              |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 生成新的报警单并保存                               |
| **receipt.modifyAlarmForm**           |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 修改报警单并保存                                 |
| **receipt.deleteAlarmForm**           |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 删除制定报警单                                  |
| **receipt.admitAlarmForm**            |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 提交报警单，变为待审批状态                            |
| **receipt.approveAlarmForm**          |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 审批报警单，可以改变单据的状态                          |
| **receipt.getAlarmForm**              |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newOverflowForm**           |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 生成新的报溢单并保存                               |
| **receipt.modifyOverflowForm**        |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 修改报溢单并保存                                 |
| **receipt.deleteOverflowForm**        |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 删除制定报溢单                                  |
| **receipt.admitOverflowForm**         |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 提交报溢单，变为待审批状态                            |
| **receipt.approveOverflowForm**       |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 审批报溢单，可以改变单据的状态                          |
| **receipt.getOverflowForm**           |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newLossForm**               |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 生成新的报损单并保存                               |
| **receipt.modifyLossForm**            |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 修改报损单并保存                                 |
| **receipt.deleteLossForm**            |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 删除制定报损单                                  |
| **receipt.admitLossForm**             |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 提交报损单，变为待审批状态                            |
| **receipt.approveLossForm**           |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 审批报损单，可以改变单据的状态                          |
| **receipt.getLossForm**               |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.getCashForm**               |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 已有对应id的现金费用单                             |
| 后置条件                                  | 无                                        |
| **receipt.newCashForm**               |                                          |
| 语法                                    | public boolean addForm(FormVO toPush);   |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editCashForm**              |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changeCashFormState**       |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.getPayForm**                |                                          |
| 语法                                    | public payFormVO getForm(String id);     |
| 前置条件                                  | 已有对应id的付款单                               |
| 后置条件                                  | 无                                        |
| **receipt.newPayForm**                |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editPayForm**               |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changePayFormState**        |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.getReceiptForm**            |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 已有对应id的收款单                               |
| 后置条件                                  | 无                                        |
| **receipt.newReceiptForm**            |                                          |
| 语法                                    | public boolean addForm(FormVO toPush);   |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editReceiptForm**           |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changeReceiptFormState**    |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.newPurchaseForm**           |                                          |
| 语法                                    | public boolean addPurchaseForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 生成新的进货单并保存                               |
| **receipt.getPurchaseForm**           |                                          |
| 语法                                    | public purchaseFormVO getForm(String id) |
| 前置条件                                  | 该id进货单据存在                                |
| 后置条件                                  | 获得该id进货单据                                |
| **receipt.modifyPurchaseForm**        |                                          |
| 语法                                    | public boolean modifyForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 修改进货单据并保存                                |
| **receipt.deletePurchaseForm**        |                                          |
| 语法                                    | public boolean deleteForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 删除进货单据                                   |
| **receipt.submitPurchaseForm**        |                                          |
| 语法                                    | public boolean submitForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 提交进货单据，变为待审批状态                           |
| **receipt.approvePurchaseForm**       |                                          |
| 语法                                    | public boolean approveForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 审批进货单据，可改变单据的状态                          |
| **receipt.newPurchaseReturnForm**     |                                          |
| 语法                                    | public boolean addPurchaseReturnForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 生成新的进货退货单据并保存                            |
| **receipt.getPurchaseReturnForm**     |                                          |
| 语法                                    | public purchaseReturnFormVO getForm(String id) |
| 前置条件                                  | 该id进货单据存在                                |
| 后置条件                                  | 获得该id进货退货单据                              |
| **receipt.modifyPurchaseReturnForm**  |                                          |
| 语法                                    | public boolean modifyForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 修改进货退货单据并保存                              |
| **receipt.deletePurchaseReturnForm**  |                                          |
| 语法                                    | public boolean deleteForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 删除进货退货单据                                 |
| **receipt.submitPurchaseReturnForm**  |                                          |
| 语法                                    | public boolean submitForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 提交进货退货单据，变为待审批状态                         |
| **receipt.approvePurchaseReturnForm** |                                          |
| 语法                                    | public boolean approveForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 审批进货退货单据，可改变单据的状态                        |
| **receipt.newSaleSlipForm**           |                                          |
| 语法                                    | public boolean addSaleSlipForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售单据服务                                 |
| 后置条件                                  | 生成新的销售单据并保存                              |
| **receipt.getSaleSlipForm**           |                                          |
| 语法                                    | public saleSlipFormVO getForm(String id) |
| 前置条件                                  | 该id销售单据存在                                |
| 后置条件                                  | 获得该id销售退货单据                              |
| **receipt.modifySaleSlipForm**        |                                          |
| 语法                                    | public boolean modifyForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 修改销售退货单据并保存                              |
| **receipt.deleteSaleSlipForm**        |                                          |
| 语法                                    | public boolean deleteForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 删除销售退货单据                                 |
| **receipt.submitSaleSlipForm**        |                                          |
| 语法                                    | public boolean submitForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleSlipForm**       |                                          |
| 语法                                    | public boolean approveForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 审批销售退货单据，可改变单据的状态                        |
| **receipt.newSaleReturnSlipForm**     |                                          |
| 语法                                    | public addSaleReturnSlipForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 生成新的销售退货单据并保存                            |
| **receipt.getSaleReturnSlipForm**     |                                          |
| 语法                                    | public saleReturnSlipFormVO getForm(String id) |
| 前置条件                                  | 该id销售退货单据存在                              |
| 后置条件                                  | 获得该id销售退货退货单据                            |
| **receipt.modifySaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean modifyForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 修改销售退货单据并保存                              |
| **receipt.deleteSaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean deleteForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 删除销售退货单据                                 |
| **receipt.submitSaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean submitForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleReturnSlipForm** |                                          |
| 语法                                    | public boolean approveForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 审批销售退货单据，可改变单据的状态                        |


**需接口**

| 服务名                      | 服务               |
| ------------------------ | ---------------- |
| receipt.getForm          | 从data层获取某个单据     |
| receipt. addForm         | 向data层添加一个单据     |
| receipt. deleteForm      | 向data层删除一个单据     |
| receipt.editForm         | 修改data层的一个单据信息   |
| receipt. changeFormState | 更改data层的一个单据审批状态 |


**reportBL模块的接口规范**

**供接口**
​	

| **report.createMainAccount** |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public boolean create();                 |
| 前置条件                         | 当前没有账目正在生效                               |
| 后置条件                         | 导入上一季度的银行账户、客户、商品信息                      |
| **report.getMainAccount**    |                                          |
| 语法                           | public MainAccountVO getMainAccount();   |
| 前置条件                         | 当前有账目正在生效                                |
| 后置条件                         | 无                                        |
| **report.getManageState**    |                                          |
| 语法                           | public manageProgressReportVO getManageState(manageProgressReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(manageProgressReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |
| **report.getManageState**    |                                          |
| 语法                           | public manageStateReportVO getManageState( manageStateReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(manageStateReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |
| **report.getsaleReport**     |                                          |
| 语法                           | public saleReportVO getManageState(saleReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(saleReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |



​	

**需接口**

| 服务名                      | 服务                |
| ------------------------ | ----------------- |
| report.createMainAccount | 向reportData创建一个账目 |
| report.getMainAccount    | 从reportData创建一个账目 |

**accountBL模块的接口规范**

**供接口**

| **accountBL.getAccount**     |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public accountVO getAccount(int id);     |
| 前置条件                         | 有该id对应的银行账户                              |
| 后置条件                         | 返回该账户的信息                                 |
| **accountBL.searchAccount**  |                                          |
| 语法                           | ArrayList	&lt;accountVO&gt;searchAccount(String keyWord,int maxMoney,int minMoney); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回符合条件的账户                                |
| **accountBL.changeName**     |                                          |
| 语法                           | public boolean changeName(String exName,String newName); |
| 前置条件                         | 存在名称为exName的账户                           |
| 后置条件                         | 返回符合条件的账户                                |
| **accountBL. newAccount**    |                                          |
| 语法                           | public boolean newAccount(String name,int money); |
| 前置条件                         | 当前没有账户名称为name                            |
| 后置条件                         | 无                                        |
| **accountBL. deleteAccount** |                                          |
| 语法                           | public boolean deleteAccount(String name); |
| 前置条件                         | 当前有账户名称为name                             |
| 后置条件                         | 删除该账户                                    |

**需接口**

| 服务名                    | 服务                  |
| ---------------------- | ------------------- |
| account.getAccount     | 获取data层的某条account数据 |
| account.searchAccount  | 从data层搜索某条account数据 |
| account.changeAccount  | 修改data层的某条account数据 |
| account.searchAccount  | 从data层搜索某条account数据 |
| account. newAccount    | 向data层添加一条account数据 |
| account. deleteAccount | 向data层删除一条account数据 |



**userBL模块的接口规范**

**供接口**

| user.Login      |                                          |
| --------------- | ---------------------------------------- |
| 语法              | public UserVO login(String id,String password) |
| 前置条件            | 用户输入有效的用户id和password。                    |
| 后置条件            | 根据ID查找是否存在相应的用户，根据输入的password返回登录验证的结果，如果通过验证，则记录当前用户。 |
| **user.add**    | 此接口针对于admin                              |
| 语法              | public boolean add(UserVO newer);        |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 增加新的用户，并返回新增结果                           |
| **user.delete** | 此接口针对于admin                              |
| 语法              | public boolean delete(String id);        |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 删除id对应 的用户，返回删除结果                        |
| **user.update** | 此接口针对于admin                              |
| 语法              | public boolean update (UserVO newer)     |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 更新用户，并返回更新结果                             |
| **user.search** | 此接口针对于admin                              |
| 语法              | public ArrayList>UserVO< searchUserByRole(RoleOfUser role) |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 搜索出某一角色的用户                               |


**需接口**

| 服务名         | 服务                     |
| ----------- | ---------------------- |
| search User | 根据RoleOfUser查找用户信息。    |
| login       | 验证用户输入id与密码是否匹配，返回验证结果 |
| update user | 更新用户                   |
| add user    | 新增用户                   |
| delete user | 删除用户                   |
|             |                        |


**strategyBL模块的接口规范**

**供接口**

| strategy.search     |                                          |
| ------------------- | ---------------------------------------- |
| 语法                  | public StrategyVO searchStrategy(String id) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 根据id查找对应 的销售策略                           |
| **strategy.create** |                                          |
| 语法                  | public String createStrategy(StrategyVO newStrategy) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 已在销售策略列表中增加一个新的销售策略                      |
| **strategy.update** |                                          |
| 语法                  | public boolean updateStrategy(StrategyVO newer) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 已编辑选定的销售策略并保存                            |
| **strategy.del**    |                                          |
| 语法                  | public boolean deleteStrategy(String id) |
| 前置条件                | 开启制定销售策略服务，并且销售策略列表中已存在至少一个销售策略          |
| 后置条件                | 已删除选定的销售策略                               |
| **strategy.getAll** |                                          |
| 语法                  | public ArrayList《StrategyVO》 getAllStrategy() |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 显示当前所有的销售策略                              |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |


**需接口**

| 服务名             | 服务         |
| --------------- | ---------- |
| create strategy | 向数据库新增一个策略 |
| update strategy | 更新一个策略     |
| search strategy | 搜索一个策略     |
| delete strategy | 删除一个策略     |
| getAllstrategy  | 得到当前所有策略   |
|                 |            |
|                 |            |
|                 |            |
|                 |            |

**customerBL模块的接口规范**

**供接口**


| customer.newPurchaseForm    |                                          |
| :-------------------------- | ---------------------------------------- |
| 语法                          | public addCustomer(CustomerVO current)   |
| 前置条件                        | 开启客户管理服务                                 |
| 后置条件                        | 生成新的客户信息并保存                              |
| **customer.getcustomer**    |                                          |
| 语法                          | public customerVO getcustomer(String id) |
| 前置条件                        | 该id客户信息存在                                |
| 后置条件                        | 获得该id客户信息                                |
| **customer.modifycustomer** |                                          |
| 语法                          | public boolean modifycustomer(customerVO current) |
| 前置条件                        | 开启客户管理信息服务                               |
| 后置条件                        | 修改客户信息并保存                                |
| **customer.deletecustomer** |                                          |
| 语法                          | public boolean deletecustomer(customerVO current) |
| 前置条件                        | 开启客户管理信息服务                               |
| 后置条件                        | 删除客户信息                                   |

**需接口**
| 服务名                   | 服务                   |
| --------------------- | -------------------- |
| customer.pushToData   | 将BL层的某个对象的变更推送到data层 |
| customer.pullFromData | 将data层的数据拉取到bl层      |

###  5.4 数据层的分解###
数据层主要给业务逻辑层提供数据访问服务，包括你对于持久化数据的增删改查。

**数据层模块的描述具体如图所示**

#### 5.4.1 数据层模块的职责 ####

| 模块           | 职责             |
| ------------ | -------------- |
| stockData    | 负责库存信息的读取与保存   |
| receiptData  | 负责单据信息的读取与保存   |
| reportData   | 负责报表信息的读取与保存   |
| accountData  | 负责账户信息的读取与保存   |
| userData     | 负责用户信息的读取与保存   |
| strategyData | 负责促销策略信息的读取与保存 |
| customerData | 负责客户信息的读取与保存   |


#### 5.4.2  数据层模块的接口规范 ####

**stockData模块的接口规范**

**供接口**

| stock.GoodsClass.add   |                                          |
| ---------------------- | ---------------------------------------- |
| 语法                     | public boolean pushToData(ArrayList<GoodsClassPO> listToPush); |
| 前置条件                   | 无                                        |
| 后置条件                   | 变更保存到data层                               |
| **stock.Goods.delete** |                                          |
| 语法                     | public ArrayList<GoodsClassPO>  pullFromData(); |
| 前置条件                   | 无                                        |
| 后置条件                   | 数据传送到bl层                                 |
**receiptData模块的接口规范**

**供接口**

| **receipt.getCashForm**                  |                                          |
| ---------------------------------------- | ---------------------------------------- |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 已有对应id的现金费用单                             |
| 后置条件                                     | 无                                        |
| **receipt.newCashForm**                  |                                          |
| 语法                                       | public boolean addForm(FormPO toPush);   |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editCashForm**                 |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changeCashFormState**          |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| **receipt.getPayForm**                   |                                          |
| 语法                                       | public payFormPO getForm(String id);     |
| 前置条件                                     | 已有对应id的付款单                               |
| 后置条件                                     | 无                                        |
| **receipt.newPayForm**                   |                                          |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editPayForm**                  |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changePayFormState**           |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| **receipt.getReceiptForm**               |                                          |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 已有对应id的收款单                               |
| 后置条件                                     | 无                                        |
| **receipt.newReceiptForm**               |                                          |
| 语法                                       | public boolean addForm(FormPO toPush);   |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editReceiptForm**              |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changeReceiptFormState**       |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| receipt.newPurchaseForm                  |                                          |
| 语法                                       | public addPurchaseForm(purchaseFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getPurchaseForm**              |                                          |
| 语法                                       | public purchaseFormVO getForm(String id) |
| 前置条件                                     | 该id进货单据存在                                |
| 后置条件                                     | 无                                        |
| **receipt.modifyPurchaseForm**           |                                          |
| 语法                                       | public boolean modifyForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改进货单据并保存                                |
| **receipt.deletePurchaseForm**           |                                          |
| 语法                                       | public boolean deleteForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除进货单据                                   |
| **receipt.submitPurchaseForm**           |                                          |
| 语法                                       | public boolean submitForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交进货单据，变为待审批状态                           |
| **receipt.approvePurchaseForm**          |                                          |
| 语法                                       | public boolean approveForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批进货单据，可改变单据的状态                          |
| **receipt.newPurchaseReturnForm**        |                                          |
| 语法                                       | public addPurchaseReturnForm(purchaseReturnFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getPurchaseReturnForm**        |                                          |
| 语法                                       | public purchaseReturnFormVO getForm(String id) |
| 前置条件                                     | 该id进货单据存在                                |
| 后置条件                                     | 获得该id进货退货单据                              |
| **receipt.modifyPurchaseReturnForm**     |                                          |
| 语法                                       | public boolean modifyForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改进货退货单据并保存                              |
| **receipt.deletePurchaseReturnForm**     |                                          |
| 语法                                       | public boolean deleteForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除进货退货单据                                 |
| **receipt.submitPurchaseReturnForm**     |                                          |
| 语法                                       | public boolean submitForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交进货退货单据，变为待审批状态                         |
| **receipt.approvePurchaseReturnForm**    |                                          |
| 语法                                       | public boolean approveForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批进货退货单据，可改变单据的状态                        |
| **receipt.newSaleSlipForm**              |                                          |
| 语法                                       | public addSaleSlipForm(saleSlipFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getSaleSlipForm**              |                                          |
| 语法                                       | public saleSlipFormVO getForm(String id) |
| 前置条件                                     | 该id销售单据存在                                |
| 后置条件                                     | 获得该id销售退货单据                              |
| **receipt.modifySaleSlipForm**           |                                          |
| 语法                                       | public boolean modifyForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改销售退货单据并保存                              |
| **receipt.deleteSaleSlipForm**           |                                          |
| 语法                                       | public boolean deleteForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除销售退货单据                                 |
| **receipt.submitSaleSlipForm**           |                                          |
| 语法                                       | public boolean submitForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleSlipForm**          |                                          |
| 语法                                       | public boolean approveForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批销售退货单据，可改变单据的状态                        |
| **receipt.newSaleReturnSlipForm**        |                                          |
| 语法                                       | public addSaleReturnSlipForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getSaleReturnSlipForm**        |                                          |
| 语法                                       | public saleReturnSlipFormVO getForm(String id) |
| 前置条件                                     | 该id销售退货单据存在                              |
| 后置条件                                     | 获得该id销售退货退货单据                            |
| **receipt.modifySaleReturnSlipForm**     |                                          |
| 语法                                       | public boolean modifyForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改销售退货单据并保存                              |
| **receipt.deleteSaleReturnSlipForm**     |                                          |
| 语法                                       | public boolean deleteForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除销售退货单据                                 |
| **receiptData.submitSaleReturnSlipForm** |                                          |
| 语法                                       | public boolean submitForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交销售退货单据，变为待审批状态                         |
| **receiptData.approveSaleReturnSlipForm** |                                          |
| 语法                                       | public boolean approveForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批销售退货单据，可改变单据的状态                        |


**需接口**


**reportData模块的接口规范**

**供接口**
​	

| **report.createMainAccount** |                                        |
| ---------------------------- | -------------------------------------- |
| 语法                           | public boolean create();               |
| 前置条件                         | 当前没有账目正在生效                             |
| 后置条件                         | 导入上一季度的银行账户、客户、商品信息                    |
| **report.getMainAccount**    |                                        |
| 语法                           | public MainAccountPO getMainAccount(); |
| 前置条件                         | 当前有账目正在生效                              |
| 后置条件                         | 无                                      |



**accountData模块的接口规范**

**供接口**

| **accountData.getAccount**     |                                          |
| ------------------------------ | ---------------------------------------- |
| 语法                             | public accountPO getAccount(int id);     |
| 前置条件                           | 有该id对应的银行账户                              |
| 后置条件                           | 返回该账户的信息                                 |
| **accountData.searchAccount**  |                                          |
| 语法                             | ArrayList	&lt;accountPO&gt;searchAccount(String keyWord,int maxMoney,int minMoney); |
| 前置条件                           | 无                                        |
| 后置条件                           | 返回符合条件的账户                                |
| **accountData.changeName**     |                                          |
| 语法                             | public boolean changeName(String exName,String newName); |
| 前置条件                           | 存在名称为exName的账户                           |
| 后置条件                           | 返回符合条件的账户                                |
| **accountData. newAccount**    |                                          |
| 语法                             | public boolean newAccount(String name,int money); |
| 前置条件                           | 当前没有账户名称为name                            |
| 后置条件                           | 无                                        |
| **accountData. deleteAccount** |                                          |
| 语法                             | public boolean deleteAccount(String name); |
| 前置条件                           | 当前有账户名称为name                             |
| 后置条件                           | 删除该账户                                    |

**userData模块的接口规范**

**供接口**

| userData.searchByID |                                          |
| ------------------- | ---------------------------------------- |
| 语法                  | public userVO searchByID(String id) throws RemoteException; |
| 前置条件                | 无                                        |
| 后置条件                | 按id进行查找返回相应的userVo结果                     |
| **userData.verify** |                                          |
| 语法                  | public boolean verify(String id，String password——in，String password) throws RemoteException; |
| 前置条件                | 有用户申请登录                                  |
| 后置条件                | 验证用户输入编号与密码是否匹配，返回验证结果                   |



**strategyData模块的接口规范**

**供接口**

| strategyData.new        |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public booean new(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中不存在同样的vo                            |
| 后置条件                    | 在数据库中增加一个vo记录                            |
| **strategyData.del**    |                                          |
| 语法                      | public booean del(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中存在同样的vo                             |
| 后置条件                    | 删除一个vo                                   |
| **strategyData.update** |                                          |
| 语法                      | public booean update(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中存在同样的vo                             |
| 后置条件                    | 更新一个vo                                   |
| **strategyData.init**   |                                          |
| 语法                      | public booean init() throws RemoteException; |
| 前置条件                    | 无                                        |
| 后置条件                    | 初始化持久化数据库                                |
| **strategyData.finish** |                                          |
| 语法                      | public booean finish() throws RemoteException; |
| 前置条件                    | 无                                        |
| 后置条件                    | 结束持久化数据库的使用                              |

**customerData模块的接口规范**

**供接口**

| customerData.newPurchaseForm |                                          |
| :--------------------------- | ---------------------------------------- |
| 语法                           | public addCustomerData(CustomerVO current) |
| 前置条件                         | 无                                        |
| 后置条件                         | 生成新的客户信息并保存                              |
| **customer.getcustomer**     |                                          |
| 语法                           | public customerVO getcustomer(String id) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 获得该id客户信息                                |
| **customer.modifycustomer**  |                                          |
| 语法                           | public boolean modifycustomer(customerVO current) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 修改客户信息并保存                                |
| **customer.deletecustomer**  |                                          |
| 语法                           | public boolean deletecustomer(customerVO current) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 删除客户信息                                   |

**需接口**


## 6.信息视角 ##

### 6.1数据持久化对象 ###
po类就是对应的实体类



### 6.2数据库表 ###

=======
---
typora-root-url: ..
---

typora-root-url: ..

# 软件体系结构设计文档 #


**文档信息：**

这是体系结构的设计文档，修改时记得填写文档信息。

| 版本号   | 人员   | 时间                     | 修改原因                               |
| ----- | ---- | ---------------------- | ---------------------------------- |
| v0.1  | lzb  | 10/11/2017 11:22:20 PM | 文档初稿                               |
| v0.2  | lzb  | 10/13/2017 11:56:27 PM | 模板修改                               |
| v0.21 | lyb  | 10/13/2017 11:56:27 PM | 添加了物理包设计表格                         |
| v0.22 | lyb  | 10/14/2017 9:29:20 PM  | 概要功能设计中去除了stock依赖receipt           |
| v0.3  | lzb  | 10/19/2017 11:13:04 AM | 接口部分（stock）                        |
| v0.4  | mxf  | 10/21/2017 15:42:18 PM | 接口部分（strategy，user，receipt）        |
| v0.5  | hqj  | 10/23/2017 15:42:18 PM | 接口部分（customer，receipt）             |
| v1.0  | lzb  | 2018-1-8 16:50         | 修改了图片，重写了stockbl，userbl，strategybl |



[TOC]


**目录：**


1. 引言
2. 产品概述
3. 逻辑视角
4. 组合视角
5. 接口视角
6. 信息视角


## 1.引言 ##

### 1.1编制目的 ###

本报告详细完成对进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。


### 1.2参考资料 ###

1. 软件体系结构设计文档模板
2. MSCS软件体系结构描述文档 
## 2.产品概述 ##
进销存系统是为灯具照明公司开发的业务系统，开发的目标是用于帮助该公司处理日常的重点业务，包括商品销售、会员发展、库存管理、商品促销、财务管理。

## 3.逻辑视角 ##



在进销存系统中，选择了分层体系结构风格，将系统分为三层（presentation,businesslogic,data)能够很好地示意整个高层抽象。

展示层：包含GUI界面的实现

业务逻辑层：包含业务逻辑处理的实现

数据层：负责数据的持久化和访问


**系统整体概要功能设计：**

| 功能       | 对应逻辑包                                    |
| -------- | ---------------------------------------- |
| stock    | stockui,stockbl,stockdata                                                                         <br/>userbl,userdata |
| receipt  | receiptui,   receiptbl，receiptdata,                                                             <br/>stockbl,stockdata                                                            <br/>userbl,userdata                                                             <br/>customerbl,customerdata                                                            <br/>accountbl,accountdata |
| report   | reportui,reportbl,reportdata                                         <br/>receiptbl，receiptdata, |
| account  | accountui,accountbl,accountdata          |
| user     | userui,userbl,userdata                   |
| strategy | strategyui,strategybl,strategydata,                          <br/>stockbl,stockdata，                                               <br/>receiptbl,receiptdata,                                      <br/>customerbl,customerdata |
| customer | customerui,customerbl,cumtomerdata       |

分层体系结构的逻辑视角和逻辑设计方案如图1和图2







![1_分层风格示意 ](/img/体系结构设计图/1_分层风格示意 .png)











![2_分层包图 ](/img/体系结构设计图/2_分层包图 .png)


## 4.组合视角 ##


### 4.1开发包图 ###
**进销存系统最终的开发包设计如表所示**


| 开发物理包               | 依赖的其他开发包                                 |
| ------------------- | ---------------------------------------- |
| mainUI              | stockUI,receiptUI,reportUI,accountUI,userUI,strategyUI,customerUI |
| stockUI             | stockBLService,vo                        |
| receiptUI           | receiptBLService,vo                      |
| reportUI            | reportBLService,vo                       |
| accountUI           | accountBLService,vo                      |
| userUI              | userBLService,vo                         |
| strategyUI          | strategyBLService,vo                     |
| customerUI          | customerBLService,vo                     |
|                     |                                          |
| stockBLService      | vo                                       |
| receiptBLService    | vo                                       |
| reportBLService     | vo                                       |
| accountBLService    | vo                                       |
| userBLService       | vo                                       |
| strategyBLService   | vo                                       |
| customerBLService   | vo                                       |
|                     |                                          |
| stockBL             | stockBLService,stockDataService,po,utllityBL<br/>userBL |
| receiptBL           | receiptBLService,receiptDataService,po,utllityBL<br/>stockBL,accountBL,userBL |
| reportBL            | reportBLService,reportDataService,po,utilltyBL<br/>receiptBL, |
| accountBL           | accountBLService,accountDataService,po,utllityBL<br/> |
| userBL              | userBLService,userDataService,po,utllityBL<br/> |
| strategyBL          | strategyBLService,strategyDataService,po,utllityBL<br/>stockBL,receiptBL |
| customerBL          | customerBLService,customerDataService,po,utllityBL<br/> |
|                     |                                          |
| stockDataService    | po,JavaRMI                               |
| receiptDataService  | po,JavaRMI                               |
| reportDataService   | po,JavaRMI                               |
| accountDataService  | po,JavaRMI                               |
| userDataService     | po,JavaRMI                               |
| strategyDataService | po,JavaRMI                               |
| customerDataService | po,JavaRMI                               |
|                     |                                          |
| stockData           | stockDataService,Databaseutllity         |
| receiptData         | receiptDataService,Databaseutllity       |
| reportData          | reportDataService,Databaseutllity        |
| accountData         | accountDataService,Databaseutllity       |
| userData            | userDataService,Databaseutllity          |
| strategyData        | strategyDataService,Databaseutllity      |
| customerData        | customerDataService,Databaseutllity      |


**进销存系统客户端开发包图如图3所示**
![3_进销存系统客户端开发包图](/img/体系结构设计图/3_进销存系统客户端开发包图.png)

**进销存系统服务器端开发包图如图4所示**









![4_进销存系统服务器端开发包图](/img/体系结构设计图/4_进销存系统服务器端开发包图.png)

### 4.2运行时进程 ###
在进销存系统中会有多个客户端进程和一个服务器进程，其进程图如图5所示。结合部署图，客户端进程是在客户端机器上运行，服务器进程在服务器端机器上运行

**进程图如图5 所示**





![5_进程图](/img/体系结构设计图/5_进程图.png)


### 4.3 物理部署 ###
进销存系统中客户端构件是在客户端机器上，服务器端构件是在服务器端机器上。在客户端节点上还要部署，RMIStub构件。由于Java RMI 构件属于JDK 6.0的一部分。所以在系统JDK环境以及设置好的情况下，不需要再对了部署。

**部署图如图6所示。**

## 5.接口视角 ##

### 5.1 模块的职责 ###
**客户端模块和服务器模块视图分别如图7和图8所示**



**客户端各层的职责**

| 层     | 职责                     |
| ----- | ---------------------- |
| 启动模块  | 负责初始化网络通信机制，启动用户界面     |
| 展示层   | 基于窗口的进销存客户端用户界面        |
| 业务逻辑层 | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 网络模块  | 利用Java RMI 机制查找RMI 服务  |

**服务器端各层的职责**

| 层    | 职责                            |
| ---- | ----------------------------- |
| 启动模块 | 负责初始化网络通信机制，启动用户界面            |
| 数据层  | 负责数据的持久化，及数据访问接口              |
| 网络模块 | 利用 Java RMI 机制开启RMI服务，注册RMI服务 |

**层之间的接口**

| 接口                                       | 服务调用方 | 服务提供方 |
| ---------------------------------------- | ----- | ----- |
| stockBLService                                                         <br/>receiptBLService                                                                  <br/>reportBLService                                                   <br/>accountBLService                                                    <br/>userBLService                                                       <br/>strategyBLService                                             <br/>customerBLService | 展示层   | 业务逻辑层 |
| stockDataService                                                         <br/>receiptDataService                                                                  <br/>reportDataService                                                   <br/>accountDataService                                                    <br/>userDataService                                                       <br/>strategyDataService                                             <br/>customerDataService | 业务逻辑层 | 数据层   |

### 5.2用户界面层的分解 ###


### 5.3 业务逻辑层的分解 ###
业务逻辑层包括多个针对界面的业务逻辑处理对象。

**业务逻辑层的设计如图9所示**



#### 5.3.1业务逻辑层模块的职责 ####

| 模块         | 职责                  |
| ---------- | ------------------- |
| stockBL    | 负责与库存相关的管理，查看，盘点等服务 |
| receiptBL  | 负责各类单据的生成服务         |
| reportBL   | 负责各类报表的生成服务         |
| accountBL  | 负责银行账户的管理           |
| userBL     | 负责用户的管理，增删改查等服务     |
| strategyBL | 负责促销策略的制定           |
| customerBL | 负责客户管理              |

#### 5.3.2 业务逻辑层模块的接口规范 ####

**stockBL模块的接口规范**

**供接口**

| stock.addGoodsClass          |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public String add(GoodsClassVO newGoodsClass) |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 系统中增加一个商品分类，分类的下级子类初始为空                  |
| **stock.modifyGoodsClass**   |                                          |
| 语法                           | public boolean modify(GoodsClassVO newer) |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 修改该分类的信息，并保存                             |
| **stock.deleteGoodsClass**   |                                          |
| 语法                           | public boolean delete(String id)         |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 找到该分类，并删除该分类，默认连带下级分类一并删除                |
| **stock.getUpperGoodsClass** |                                          |
| 语法                           | public GoodsClassVO getUpper(String id)  |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 返回current分类的父类引用                         |
| **stock.getLowerGoodsClass** |                                          |
| 语法                           | public ArrayList &lt;GoodsClassVO&gt;  getLower(String id) |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current分类的子类信息                         |
| **stock.searchGoodsClass**   |                                          |
| 语法                           | public ArrayList &lt;GoodsVO&gt; search(String name) |
| 前置条件                         | 启动商品分类管理服务                               |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.addGoods**           |                                          |
| 语法                           | public String add(GoodsVO newGoods)      |
| 前置条件                         | 启动分类管理服务                                 |
| 后置条件                         | 添加商品,保存信息，并自动生成编号                        |
| **stock.modifyGoods**        |                                          |
| 语法                           | public boolean modify(GoodsVO newer)     |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 修改商品信息，并保存，返回是否成功                        |
| **stock.deleteGoods**        |                                          |
| 语法                           | public boolean delete(GoodsVO current)   |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 删除current对应的商品，返回是否成功                    |
| **stock.getUpperGoodsClass** |                                          |
| 语法                           | public GoodsClassVO getUpper(String id)  |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.searchGoods**        |                                          |
| 语法                           | public ArrayList &lt;GoodsVO&gt; search(String nameOrId) |
| 前置条件                         | 启动商品管理服务                                 |
| 后置条件                         | 返回current对应的商品分类信息                       |
| **stock.lookOver**           |                                          |
| 语法                           | public PortVO lookOver(Date begin,Date end) |
| 前置条件                         | 库存人员登录完毕                                 |
| 后置条件                         | 返回满足时间条件的出入库商品列表                         |
| **stock.examine**            |                                          |
| 语法                           | public SnapshotVO examine()              |
| 前置条件                         | 库存人员登录完毕                                 |
| **stock.toExcel**            |                                          |
| 语法                           | public boolean toExcel(ArrayList<GoodsVO> list) |
| 前置条件                         | 库存人员登录完毕                                 |
| 后置条件                         | 将数据导出到excel中                             |




**需接口**

| 服务名               | 服务            |
| ----------------- | ------------- |
| add goodsclass    | 向数据库中新增商品分类   |
| delete goodsclass | 删除数据库中对应的商品分类 |
| update goodsclass | 更新数据库中对应的商品分类 |
| search goodsclass | 搜索数据库中的商品分类   |
| add goods         | 向数据库中新增商品     |
| delete goods      | 删除数据库中对应的商品   |
| update goods      | 更新数据库中对应的商品   |
| search goods      | 搜索数据库中的商品     |


**receiptBL模块的接口规范**

**供接口**

| receipt.newForm         |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public boolean addForm(FormVO current);  |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 生成新的相应单据并保存                              |
| **receipt.modifyForm**  |                                          |
| 语法                      | public boolean modifyForm(FormVO newer); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 修改相应单据并保存                                |
| **receipt.deleteForm**  |                                          |
| 语法                      | public boolean deleteForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 删除相应单据赠送单                                |
| **receipt.admitForm**   |                                          |
| 语法                      | public boolean admitForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 提交相应单据，变为待审批状态                           |
| **receipt.approveForm** |                                          |
| 语法                      | public boolean approveForm(FormVO current); |
| 前置条件                    | 开启相应单据服务                                 |
| 后置条件                    | 审批单据，可以改变单据的状态                           |
| **receipt.getForm**     |                                          |
| 语法                      | public FormVO getForm(String id);        |
| 前置条件                    | 开启赠送单服务                                  |
| 后置条件                    | 无                                        |


| receipt.newPresentForm                |                                          |
| ------------------------------------- | ---------------------------------------- |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 生成新的赠送单并保存                               |
| **receipt.modifyPresentForm**         |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 修改赠送单并保存                                 |
| **receipt.deletePresentForm**         |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 删除制定赠送单                                  |
| **receipt.admitPresentForm**          |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 提交赠送单，变为待审批状态                            |
| **receipt.approvePresentForm**        |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 审批赠送单，可以改变单据的状态                          |
| **receipt.getPresentForm**            |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启赠送单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newAlarmForm**              |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 生成新的报警单并保存                               |
| **receipt.modifyAlarmForm**           |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 修改报警单并保存                                 |
| **receipt.deleteAlarmForm**           |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 删除制定报警单                                  |
| **receipt.admitAlarmForm**            |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 提交报警单，变为待审批状态                            |
| **receipt.approveAlarmForm**          |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 审批报警单，可以改变单据的状态                          |
| **receipt.getAlarmForm**              |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报警单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newOverflowForm**           |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 生成新的报溢单并保存                               |
| **receipt.modifyOverflowForm**        |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 修改报溢单并保存                                 |
| **receipt.deleteOverflowForm**        |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 删除制定报溢单                                  |
| **receipt.admitOverflowForm**         |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 提交报溢单，变为待审批状态                            |
| **receipt.approveOverflowForm**       |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 审批报溢单，可以改变单据的状态                          |
| **receipt.getOverflowForm**           |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报溢单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.newLossForm**               |                                          |
| 语法                                    | public boolean addForm(FormVO current);  |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 生成新的报损单并保存                               |
| **receipt.modifyLossForm**            |                                          |
| 语法                                    | public boolean modifyForm(FormVO newer); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 修改报损单并保存                                 |
| **receipt.deleteLossForm**            |                                          |
| 语法                                    | public boolean deleteForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 删除制定报损单                                  |
| **receipt.admitLossForm**             |                                          |
| 语法                                    | public boolean admitForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 提交报损单，变为待审批状态                            |
| **receipt.approveLossForm**           |                                          |
| 语法                                    | public boolean approveForm(FormVO current); |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 审批报损单，可以改变单据的状态                          |
| **receipt.getLossForm**               |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 开启报损单服务                                  |
| 后置条件                                  | 无                                        |
| **receipt.getCashForm**               |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 已有对应id的现金费用单                             |
| 后置条件                                  | 无                                        |
| **receipt.newCashForm**               |                                          |
| 语法                                    | public boolean addForm(FormVO toPush);   |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editCashForm**              |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changeCashFormState**       |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.getPayForm**                |                                          |
| 语法                                    | public payFormVO getForm(String id);     |
| 前置条件                                  | 已有对应id的付款单                               |
| 后置条件                                  | 无                                        |
| **receipt.newPayForm**                |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editPayForm**               |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changePayFormState**        |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.getReceiptForm**            |                                          |
| 语法                                    | public FormVO getForm(String id);        |
| 前置条件                                  | 已有对应id的收款单                               |
| 后置条件                                  | 无                                        |
| **receipt.newReceiptForm**            |                                          |
| 语法                                    | public boolean addForm(FormVO toPush);   |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.editReceiptForm**           |                                          |
| 语法                                    | public boolean modifyForm(FormVO toPush); |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 提交并等待被审批                                 |
| **receipt.changeReceiptFormState**    |                                          |
| 语法                                    | public boolean changeState(FormVO form,StateOfForm newState) |
| 前置条件                                  | 原单据存在                                    |
| 后置条件                                  | 通过后入账，不通过则返回重新修改                         |
| **receipt.newPurchaseForm**           |                                          |
| 语法                                    | public boolean addPurchaseForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 生成新的进货单并保存                               |
| **receipt.getPurchaseForm**           |                                          |
| 语法                                    | public purchaseFormVO getForm(String id) |
| 前置条件                                  | 该id进货单据存在                                |
| 后置条件                                  | 获得该id进货单据                                |
| **receipt.modifyPurchaseForm**        |                                          |
| 语法                                    | public boolean modifyForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 修改进货单据并保存                                |
| **receipt.deletePurchaseForm**        |                                          |
| 语法                                    | public boolean deleteForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 删除进货单据                                   |
| **receipt.submitPurchaseForm**        |                                          |
| 语法                                    | public boolean submitForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 提交进货单据，变为待审批状态                           |
| **receipt.approvePurchaseForm**       |                                          |
| 语法                                    | public boolean approveForm(purchaseFormVO current) |
| 前置条件                                  | 开启进货单据服务                                 |
| 后置条件                                  | 审批进货单据，可改变单据的状态                          |
| **receipt.newPurchaseReturnForm**     |                                          |
| 语法                                    | public boolean addPurchaseReturnForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 生成新的进货退货单据并保存                            |
| **receipt.getPurchaseReturnForm**     |                                          |
| 语法                                    | public purchaseReturnFormVO getForm(String id) |
| 前置条件                                  | 该id进货单据存在                                |
| 后置条件                                  | 获得该id进货退货单据                              |
| **receipt.modifyPurchaseReturnForm**  |                                          |
| 语法                                    | public boolean modifyForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 修改进货退货单据并保存                              |
| **receipt.deletePurchaseReturnForm**  |                                          |
| 语法                                    | public boolean deleteForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 删除进货退货单据                                 |
| **receipt.submitPurchaseReturnForm**  |                                          |
| 语法                                    | public boolean submitForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 提交进货退货单据，变为待审批状态                         |
| **receipt.approvePurchaseReturnForm** |                                          |
| 语法                                    | public boolean approveForm(purchaseReturnFormVO current) |
| 前置条件                                  | 开启进货退货单据服务                               |
| 后置条件                                  | 审批进货退货单据，可改变单据的状态                        |
| **receipt.newSaleSlipForm**           |                                          |
| 语法                                    | public boolean addSaleSlipForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售单据服务                                 |
| 后置条件                                  | 生成新的销售单据并保存                              |
| **receipt.getSaleSlipForm**           |                                          |
| 语法                                    | public saleSlipFormVO getForm(String id) |
| 前置条件                                  | 该id销售单据存在                                |
| 后置条件                                  | 获得该id销售退货单据                              |
| **receipt.modifySaleSlipForm**        |                                          |
| 语法                                    | public boolean modifyForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 修改销售退货单据并保存                              |
| **receipt.deleteSaleSlipForm**        |                                          |
| 语法                                    | public boolean deleteForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 删除销售退货单据                                 |
| **receipt.submitSaleSlipForm**        |                                          |
| 语法                                    | public boolean submitForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleSlipForm**       |                                          |
| 语法                                    | public boolean approveForm(saleSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 审批销售退货单据，可改变单据的状态                        |
| **receipt.newSaleReturnSlipForm**     |                                          |
| 语法                                    | public addSaleReturnSlipForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 生成新的销售退货单据并保存                            |
| **receipt.getSaleReturnSlipForm**     |                                          |
| 语法                                    | public saleReturnSlipFormVO getForm(String id) |
| 前置条件                                  | 该id销售退货单据存在                              |
| 后置条件                                  | 获得该id销售退货退货单据                            |
| **receipt.modifySaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean modifyForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 修改销售退货单据并保存                              |
| **receipt.deleteSaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean deleteForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 删除销售退货单据                                 |
| **receipt.submitSaleReturnSlipForm**  |                                          |
| 语法                                    | public boolean submitForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleReturnSlipForm** |                                          |
| 语法                                    | public boolean approveForm(saleReturnSlipFormVO current) |
| 前置条件                                  | 开启销售退货单据服务                               |
| 后置条件                                  | 审批销售退货单据，可改变单据的状态                        |


**需接口**

| 服务名                      | 服务               |
| ------------------------ | ---------------- |
| receipt.getForm          | 从data层获取某个单据     |
| receipt. addForm         | 向data层添加一个单据     |
| receipt. deleteForm      | 向data层删除一个单据     |
| receipt.editForm         | 修改data层的一个单据信息   |
| receipt. changeFormState | 更改data层的一个单据审批状态 |


**reportBL模块的接口规范**

**供接口**
​	

| **report.createMainAccount** |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public boolean create();                 |
| 前置条件                         | 当前没有账目正在生效                               |
| 后置条件                         | 导入上一季度的银行账户、客户、商品信息                      |
| **report.getMainAccount**    |                                          |
| 语法                           | public MainAccountVO getMainAccount();   |
| 前置条件                         | 当前有账目正在生效                                |
| 后置条件                         | 无                                        |
| **report.getManageState**    |                                          |
| 语法                           | public manageProgressReportVO getManageState(manageProgressReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(manageProgressReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |
| **report.getManageState**    |                                          |
| 语法                           | public manageStateReportVO getManageState( manageStateReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(manageStateReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |
| **report.getsaleReport**     |                                          |
| 语法                           | public saleReportVO getManageState(saleReportVO searchTime); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回该时间段的经营情况信息                            |
| **report.ExportReport**      |                                          |
| 语法                           | public boolean ExportReport(saleReportVO da，String path); |
| 前置条件                         | 报表数据不为空                                  |
| 后置条件                         | 导出数据                                     |



​	

**需接口**

| 服务名                      | 服务                |
| ------------------------ | ----------------- |
| report.createMainAccount | 向reportData创建一个账目 |
| report.getMainAccount    | 从reportData创建一个账目 |

**accountBL模块的接口规范**

**供接口**

| **accountBL.getAccount**     |                                          |
| ---------------------------- | ---------------------------------------- |
| 语法                           | public accountVO getAccount(int id);     |
| 前置条件                         | 有该id对应的银行账户                              |
| 后置条件                         | 返回该账户的信息                                 |
| **accountBL.searchAccount**  |                                          |
| 语法                           | ArrayList	&lt;accountVO&gt;searchAccount(String keyWord,int maxMoney,int minMoney); |
| 前置条件                         | 无                                        |
| 后置条件                         | 返回符合条件的账户                                |
| **accountBL.changeName**     |                                          |
| 语法                           | public boolean changeName(String exName,String newName); |
| 前置条件                         | 存在名称为exName的账户                           |
| 后置条件                         | 返回符合条件的账户                                |
| **accountBL. newAccount**    |                                          |
| 语法                           | public boolean newAccount(String name,int money); |
| 前置条件                         | 当前没有账户名称为name                            |
| 后置条件                         | 无                                        |
| **accountBL. deleteAccount** |                                          |
| 语法                           | public boolean deleteAccount(String name); |
| 前置条件                         | 当前有账户名称为name                             |
| 后置条件                         | 删除该账户                                    |

**需接口**

| 服务名                    | 服务                  |
| ---------------------- | ------------------- |
| account.getAccount     | 获取data层的某条account数据 |
| account.searchAccount  | 从data层搜索某条account数据 |
| account.changeAccount  | 修改data层的某条account数据 |
| account.searchAccount  | 从data层搜索某条account数据 |
| account. newAccount    | 向data层添加一条account数据 |
| account. deleteAccount | 向data层删除一条account数据 |



**userBL模块的接口规范**

**供接口**

| user.Login      |                                          |
| --------------- | ---------------------------------------- |
| 语法              | public UserVO login(String id,String password) |
| 前置条件            | 用户输入有效的用户id和password。                    |
| 后置条件            | 根据ID查找是否存在相应的用户，根据输入的password返回登录验证的结果，如果通过验证，则记录当前用户。 |
| **user.add**    | 此接口针对于admin                              |
| 语法              | public boolean add(UserVO newer);        |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 增加新的用户，并返回新增结果                           |
| **user.delete** | 此接口针对于admin                              |
| 语法              | public boolean delete(String id);        |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 删除id对应 的用户，返回删除结果                        |
| **user.update** | 此接口针对于admin                              |
| 语法              | public boolean update (UserVO newer)     |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 更新用户，并返回更新结果                             |
| **user.search** | 此接口针对于admin                              |
| 语法              | public ArrayList>UserVO< searchUserByRole(RoleOfUser role) |
| 前置条件            | 管理员权限登陆完毕                                |
| 后置条件            | 搜索出某一角色的用户                               |


**需接口**

| 服务名         | 服务                     |
| ----------- | ---------------------- |
| search User | 根据RoleOfUser查找用户信息。    |
| login       | 验证用户输入id与密码是否匹配，返回验证结果 |
| update user | 更新用户                   |
| add user    | 新增用户                   |
| delete user | 删除用户                   |
|             |                        |


**strategyBL模块的接口规范**

**供接口**

| strategy.search     |                                          |
| ------------------- | ---------------------------------------- |
| 语法                  | public StrategyVO searchStrategy(String id) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 根据id查找对应 的销售策略                           |
| **strategy.create** |                                          |
| 语法                  | public String createStrategy(StrategyVO newStrategy) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 已在销售策略列表中增加一个新的销售策略                      |
| **strategy.update** |                                          |
| 语法                  | public boolean updateStrategy(StrategyVO newer) |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 已编辑选定的销售策略并保存                            |
| **strategy.del**    |                                          |
| 语法                  | public boolean deleteStrategy(String id) |
| 前置条件                | 开启制定销售策略服务，并且销售策略列表中已存在至少一个销售策略          |
| 后置条件                | 已删除选定的销售策略                               |
| **strategy.getAll** |                                          |
| 语法                  | public ArrayList《StrategyVO》 getAllStrategy() |
| 前置条件                | 开启制定销售策略服务                               |
| 后置条件                | 显示当前所有的销售策略                              |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |
|                     |                                          |


**需接口**

| 服务名             | 服务         |
| --------------- | ---------- |
| create strategy | 向数据库新增一个策略 |
| update strategy | 更新一个策略     |
| search strategy | 搜索一个策略     |
| delete strategy | 删除一个策略     |
| getAllstrategy  | 得到当前所有策略   |
|                 |            |
|                 |            |
|                 |            |
|                 |            |

**customerBL模块的接口规范**

**供接口**


| customer.newPurchaseForm    |                                          |
| :-------------------------- | ---------------------------------------- |
| 语法                          | public addCustomer(CustomerVO current)   |
| 前置条件                        | 开启客户管理服务                                 |
| 后置条件                        | 生成新的客户信息并保存                              |
| **customer.getcustomer**    |                                          |
| 语法                          | public customerVO getcustomer(String id) |
| 前置条件                        | 该id客户信息存在                                |
| 后置条件                        | 获得该id客户信息                                |
| **customer.modifycustomer** |                                          |
| 语法                          | public boolean modifycustomer(customerVO current) |
| 前置条件                        | 开启客户管理信息服务                               |
| 后置条件                        | 修改客户信息并保存                                |
| **customer.deletecustomer** |                                          |
| 语法                          | public boolean deletecustomer(customerVO current) |
| 前置条件                        | 开启客户管理信息服务                               |
| 后置条件                        | 删除客户信息                                   |

**需接口**
| 服务名                   | 服务                   |
| --------------------- | -------------------- |
| customer.pushToData   | 将BL层的某个对象的变更推送到data层 |
| customer.pullFromData | 将data层的数据拉取到bl层      |

###  5.4 数据层的分解###
数据层主要给业务逻辑层提供数据访问服务，包括你对于持久化数据的增删改查。

**数据层模块的描述具体如图所示**

#### 5.4.1 数据层模块的职责 ####

| 模块           | 职责             |
| ------------ | -------------- |
| stockData    | 负责库存信息的读取与保存   |
| receiptData  | 负责单据信息的读取与保存   |
| reportData   | 负责报表信息的读取与保存   |
| accountData  | 负责账户信息的读取与保存   |
| userData     | 负责用户信息的读取与保存   |
| strategyData | 负责促销策略信息的读取与保存 |
| customerData | 负责客户信息的读取与保存   |


#### 5.4.2  数据层模块的接口规范 ####

**stockData模块的接口规范**

**供接口**

| stock.GoodsClass.add   |                                          |
| ---------------------- | ---------------------------------------- |
| 语法                     | public boolean pushToData(ArrayList<GoodsClassPO> listToPush); |
| 前置条件                   | 无                                        |
| 后置条件                   | 变更保存到data层                               |
| **stock.Goods.delete** |                                          |
| 语法                     | public ArrayList<GoodsClassPO>  pullFromData(); |
| 前置条件                   | 无                                        |
| 后置条件                   | 数据传送到bl层                                 |
**receiptData模块的接口规范**

**供接口**

| **receipt.getCashForm**                  |                                          |
| ---------------------------------------- | ---------------------------------------- |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 已有对应id的现金费用单                             |
| 后置条件                                     | 无                                        |
| **receipt.newCashForm**                  |                                          |
| 语法                                       | public boolean addForm(FormPO toPush);   |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editCashForm**                 |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changeCashFormState**          |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| **receipt.getPayForm**                   |                                          |
| 语法                                       | public payFormPO getForm(String id);     |
| 前置条件                                     | 已有对应id的付款单                               |
| 后置条件                                     | 无                                        |
| **receipt.newPayForm**                   |                                          |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editPayForm**                  |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changePayFormState**           |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| **receipt.getReceiptForm**               |                                          |
| 语法                                       | public FormPO getForm(String id);        |
| 前置条件                                     | 已有对应id的收款单                               |
| 后置条件                                     | 无                                        |
| **receipt.newReceiptForm**               |                                          |
| 语法                                       | public boolean addForm(FormPO toPush);   |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.editReceiptForm**              |                                          |
| 语法                                       | public boolean modifyForm(FormPO toPush); |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.changeReceiptFormState**       |                                          |
| 语法                                       | public boolean changeState(FormPO form,StateOfForm newState) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 通过后入账，不通过则返回重新修改                         |
| receipt.newPurchaseForm                  |                                          |
| 语法                                       | public addPurchaseForm(purchaseFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getPurchaseForm**              |                                          |
| 语法                                       | public purchaseFormVO getForm(String id) |
| 前置条件                                     | 该id进货单据存在                                |
| 后置条件                                     | 无                                        |
| **receipt.modifyPurchaseForm**           |                                          |
| 语法                                       | public boolean modifyForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改进货单据并保存                                |
| **receipt.deletePurchaseForm**           |                                          |
| 语法                                       | public boolean deleteForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除进货单据                                   |
| **receipt.submitPurchaseForm**           |                                          |
| 语法                                       | public boolean submitForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交进货单据，变为待审批状态                           |
| **receipt.approvePurchaseForm**          |                                          |
| 语法                                       | public boolean approveForm(purchaseFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批进货单据，可改变单据的状态                          |
| **receipt.newPurchaseReturnForm**        |                                          |
| 语法                                       | public addPurchaseReturnForm(purchaseReturnFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getPurchaseReturnForm**        |                                          |
| 语法                                       | public purchaseReturnFormVO getForm(String id) |
| 前置条件                                     | 该id进货单据存在                                |
| 后置条件                                     | 获得该id进货退货单据                              |
| **receipt.modifyPurchaseReturnForm**     |                                          |
| 语法                                       | public boolean modifyForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改进货退货单据并保存                              |
| **receipt.deletePurchaseReturnForm**     |                                          |
| 语法                                       | public boolean deleteForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除进货退货单据                                 |
| **receipt.submitPurchaseReturnForm**     |                                          |
| 语法                                       | public boolean submitForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交进货退货单据，变为待审批状态                         |
| **receipt.approvePurchaseReturnForm**    |                                          |
| 语法                                       | public boolean approveForm(purchaseReturnFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批进货退货单据，可改变单据的状态                        |
| **receipt.newSaleSlipForm**              |                                          |
| 语法                                       | public addSaleSlipForm(saleSlipFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getSaleSlipForm**              |                                          |
| 语法                                       | public saleSlipFormVO getForm(String id) |
| 前置条件                                     | 该id销售单据存在                                |
| 后置条件                                     | 获得该id销售退货单据                              |
| **receipt.modifySaleSlipForm**           |                                          |
| 语法                                       | public boolean modifyForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改销售退货单据并保存                              |
| **receipt.deleteSaleSlipForm**           |                                          |
| 语法                                       | public boolean deleteForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除销售退货单据                                 |
| **receipt.submitSaleSlipForm**           |                                          |
| 语法                                       | public boolean submitForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交销售退货单据，变为待审批状态                         |
| **receipt.approveSaleSlipForm**          |                                          |
| 语法                                       | public boolean approveForm(saleSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批销售退货单据，可改变单据的状态                        |
| **receipt.newSaleReturnSlipForm**        |                                          |
| 语法                                       | public addSaleReturnSlipForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 无                                        |
| 后置条件                                     | 提交并等待被审批                                 |
| **receipt.getSaleReturnSlipForm**        |                                          |
| 语法                                       | public saleReturnSlipFormVO getForm(String id) |
| 前置条件                                     | 该id销售退货单据存在                              |
| 后置条件                                     | 获得该id销售退货退货单据                            |
| **receipt.modifySaleReturnSlipForm**     |                                          |
| 语法                                       | public boolean modifyForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 修改销售退货单据并保存                              |
| **receipt.deleteSaleReturnSlipForm**     |                                          |
| 语法                                       | public boolean deleteForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 删除销售退货单据                                 |
| **receiptData.submitSaleReturnSlipForm** |                                          |
| 语法                                       | public boolean submitForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 提交销售退货单据，变为待审批状态                         |
| **receiptData.approveSaleReturnSlipForm** |                                          |
| 语法                                       | public boolean approveForm(saleReturnSlipFormVO current) |
| 前置条件                                     | 原单据存在                                    |
| 后置条件                                     | 审批销售退货单据，可改变单据的状态                        |


**需接口**


**reportData模块的接口规范**

**供接口**
​	

| **report.createMainAccount** |                                        |
| ---------------------------- | -------------------------------------- |
| 语法                           | public boolean create();               |
| 前置条件                         | 当前没有账目正在生效                             |
| 后置条件                         | 导入上一季度的银行账户、客户、商品信息                    |
| **report.getMainAccount**    |                                        |
| 语法                           | public MainAccountPO getMainAccount(); |
| 前置条件                         | 当前有账目正在生效                              |
| 后置条件                         | 无                                      |



**accountData模块的接口规范**

**供接口**

| **accountData.getAccount**     |                                          |
| ------------------------------ | ---------------------------------------- |
| 语法                             | public accountPO getAccount(int id);     |
| 前置条件                           | 有该id对应的银行账户                              |
| 后置条件                           | 返回该账户的信息                                 |
| **accountData.searchAccount**  |                                          |
| 语法                             | ArrayList	&lt;accountPO&gt;searchAccount(String keyWord,int maxMoney,int minMoney); |
| 前置条件                           | 无                                        |
| 后置条件                           | 返回符合条件的账户                                |
| **accountData.changeName**     |                                          |
| 语法                             | public boolean changeName(String exName,String newName); |
| 前置条件                           | 存在名称为exName的账户                           |
| 后置条件                           | 返回符合条件的账户                                |
| **accountData. newAccount**    |                                          |
| 语法                             | public boolean newAccount(String name,int money); |
| 前置条件                           | 当前没有账户名称为name                            |
| 后置条件                           | 无                                        |
| **accountData. deleteAccount** |                                          |
| 语法                             | public boolean deleteAccount(String name); |
| 前置条件                           | 当前有账户名称为name                             |
| 后置条件                           | 删除该账户                                    |

**userData模块的接口规范**

**供接口**

| userData.searchByID |                                          |
| ------------------- | ---------------------------------------- |
| 语法                  | public userVO searchByID(String id) throws RemoteException; |
| 前置条件                | 无                                        |
| 后置条件                | 按id进行查找返回相应的userVo结果                     |
| **userData.verify** |                                          |
| 语法                  | public boolean verify(String id，String password——in，String password) throws RemoteException; |
| 前置条件                | 有用户申请登录                                  |
| 后置条件                | 验证用户输入编号与密码是否匹配，返回验证结果                   |



**strategyData模块的接口规范**

**供接口**

| strategyData.new        |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public booean new(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中不存在同样的vo                            |
| 后置条件                    | 在数据库中增加一个vo记录                            |
| **strategyData.del**    |                                          |
| 语法                      | public booean del(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中存在同样的vo                             |
| 后置条件                    | 删除一个vo                                   |
| **strategyData.update** |                                          |
| 语法                      | public booean update(strategyVO vo) throws RemoteException; |
| 前置条件                    | 在数据库中存在同样的vo                             |
| 后置条件                    | 更新一个vo                                   |
| **strategyData.init**   |                                          |
| 语法                      | public booean init() throws RemoteException; |
| 前置条件                    | 无                                        |
| 后置条件                    | 初始化持久化数据库                                |
| **strategyData.finish** |                                          |
| 语法                      | public booean finish() throws RemoteException; |
| 前置条件                    | 无                                        |
| 后置条件                    | 结束持久化数据库的使用                              |

**customerData模块的接口规范**

**供接口**

| customerData.newPurchaseForm |                                          |
| :--------------------------- | ---------------------------------------- |
| 语法                           | public addCustomerData(CustomerVO current) |
| 前置条件                         | 无                                        |
| 后置条件                         | 生成新的客户信息并保存                              |
| **customer.getcustomer**     |                                          |
| 语法                           | public customerVO getcustomer(String id) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 获得该id客户信息                                |
| **customer.modifycustomer**  |                                          |
| 语法                           | public boolean modifycustomer(customerVO current) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 修改客户信息并保存                                |
| **customer.deletecustomer**  |                                          |
| 语法                           | public boolean deletecustomer(customerVO current) |
| 前置条件                         | 该id客户信息存在                                |
| 后置条件                         | 删除客户信息                                   |

**需接口**


## 6.信息视角 ##

### 6.1数据持久化对象 ###
po类就是对应的实体类



### 6.2数据库表 ###

>>>>>>> lzb
