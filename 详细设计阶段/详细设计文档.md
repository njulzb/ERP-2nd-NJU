# 详细设计文档 #


[TOC]


文档信息：

| 版本号  | 人员   | 时间                     | 修改                  |
| ---- | ---- | ---------------------- | ------------------- |
| v0.1 | lzb  | 10/31/2017 12:41:10 AM | 文档模板                |
| v0.2 | lzb  | 2017.11.6              | 添加stock模块描述         |
| v0.3 | lyb  | 2017.11.6              | receipt模块           |
| v0.4 | hqj  | 2017.11.10             | customer模块          |
| v0.5 | mxf  | 2017.11.10             | 添加strategy模块，user模块 |
| v0.6 | hqj  | 2017.11.20             | 补充account，customer  |

目录：

1. 引言
2. 产品概述
3. 体系结构设计概述
4. 结构视角
  1. 业务逻辑层的分解
5. 依赖视角


## 1.引言 ##

### 1.1编制目的 ###

### 1.2参考资料 ###






## 2.产品概述 ##



## 3.体系结构设计概述 ##

<br><br/><br/><br/><br/>

## 4.结构视角 ##


<br/>

### 4.1业务逻辑层的分解 ###

---

#### 4.1.1 stockBL模块 ####

---

#### （1）模块概述 ####
 stockBL模块承担的需求，及职责和接口如下：

    1. 需求：商品管理，商品分类管理，库存查看，库存盘点，库存单据（报溢，报损，赠送，报警）
    2. 职责：负责实现库存界面所需要的服务
    3. 接口： StockBLService && StockDataService


#### （2）整体结构  ####

StockBL模块设计如图：

![Stock module (1)](.\Stock module (1).png)



| **类**           |                 **职责**                 |
| --------------- | :------------------------------------: |
| GoodsClass      |               是商品分类的实体类                |
| Goods           |                是商品的实体类                 |
| GoodsList       |         负责维护系统中的商品列表，功能有增删改查等          |
| StockController | 负责实现StockBLService 接口，并作为控制器，分配职责，控制协作 |
| PortSearch      |            负责生成库存查看，库存盘点的报表            |





| **接口**       | 操作方法                                     | 职责                     |
| ------------ | ---------------------------------------- | ---------------------- |
| StockInfo    | **include importGoods and exportGoods methods**<br/>public boolean importGoods (ArrayList<Goods> importList);<br/>public boolean exportGoods (ArrayList<Goods> exportList); | 对其他模块提供的接口，使其能够完成商品出入库 |
| QuestionInfo | public ArrayList<Goods>  getReceipt(Date begin,Date end) | 查询单据，得到规定时间内的出入库商品     |
|              |                                          |                        |
|              |                                          |                        |



#### （3）模块内部类的接口规范 ####

**StockController 类的接口：**

**供接口：**

| **StockController.add**               |                                          |
| ------------------------------------- | ---------------------------------------- |
| 语法                                    | public boolean add(GoodsClassVO newGoodsClass)<br/>public boolean add(GoodsVO newGoods) |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用调用GoodsList里的add方法                     |
| **StockController.modify**            |                                          |
| 语法                                    | public boolean modify(GoodsClassVO  newer)<br/>public boolean modify(GoodsVO newer) |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用GoodsList里的modify方法                    |
| **StockController.delete**            |                                          |
| 语法                                    | public boolean delete(GoodsVO current)<br/>public boolean deleteOne(GoodsClassVO current)<br/>public boolean deleteAll(GoodsClassVO current) |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用GoodsList里的delete方法                    |
| **StockController.search**            |                                          |
| 语法                                    | public ArrayList<GoodsClassVO> search(String NameOrID) |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用GoodsList里的search方法                    |
| **StockController.getRoot**           |                                          |
| 语法                                    | public GoodsClassVO getRoot()            |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用GoodsList里的getRoot方法                   |
| **StockController.getUpper or lower** |                                          |
| 语法                                    | public GoodsClassVO getUpper(GoodsClassVO current)<br/>public ArrayList<GoodsClassVO> getLower(GoodsClassVO current)<br/>public GoodsClassVO getUpper(GoodsVO current)<br/> |
| 前置条件                                  | GoodsList 已经创建                           |
| 后置条件                                  | 调用GoodsList里的getUpper,getLower方法         |
| **StockController.lookOver**          |                                          |
| 语法                                    | public ArrayList<GoodsVO> lookOver(Date begin, Date end) |
| 前置条件                                  | PortSearch 已创建                           |
| 后置条件                                  | 调用PortSearch里的lookOver方法                 |
| **StockController.examine**           |                                          |
| 语法                                    | public ArrayList<GoodsVO> examine()      |
| 前置条件                                  | PortSearch已创建                            |
| 后置条件                                  | 调用PortSearch里的examine方法                  |
| **StockController.exportGoods**       |                                          |
| 语法                                    | public boolean exportGoods(Form exportForm) |
| 前置条件                                  | GoodsList 已创建                            |
| 后置条件                                  | 调用GoodsList里的exportGoods方法               |
| **StockController.importGoods**       |                                          |
| 语法                                    | public boolean importGoods(Form importForm) |
| 前置条件                                  | GoodsList已创建                             |
| 后置条件                                  | 调用GoodsList里的importGoods方法               |
| **StockController.toExcel**           |                                          |
| 语法                                    | public boolean toExcel(ArrayList< GoodsVO> list) |
| 前置条件                                  | 无                                        |
| 后置条件                                  | 导出到excel                                 |







**GoodsList的接口规范：**



**供接口：**





| **GoodsList.add**               |                                          |
| ------------------------------- | ---------------------------------------- |
| 语法                              | public boolean add(GoodsClassVO newGoodsClass)<br/>public boolean add(GoodsVO newGoods) |
| 前置条件                            | StockDataService 已经创建                    |
| 后置条件                            | 调用StockDataService里的add方法                |
| **GoodsList.modify**            |                                          |
| 语法                              | public boolean modify(GoodsClassVO  newer)<br/>public boolean modify(GoodsVO newer) |
| 前置条件                            | StockDataService已经创建                     |
| 后置条件                            | 调用StockDataServicet里的modify方法            |
| **GoodsList.delete**            |                                          |
| 语法                              | public boolean delete(GoodsVO current)<br/>public boolean deleteOne(GoodsClassVO current)<br/>public boolean deleteAll(GoodsClassVO current) |
| 前置条件                            | StockDataService 已经创建                    |
| 后置条件                            | 调用StockDataService里的delete方法             |
| **GoodsList.search**            |                                          |
| 语法                              | public ArrayList<GoodsClassVO> search(String NameOrID) |
| 前置条件                            | StockDataService 已经创建                    |
| 后置条件                            | 调用StockDataService里的search方法             |
| **GoodsList.getRoot**           |                                          |
| 语法                              | public GoodsClassVO getRoot()            |
| 前置条件                            | StockDataService已经创建                     |
| 后置条件                            | 调用StockDataService里的getRoot方法            |
| **GoodsList.getUpper or lower** |                                          |
| 语法                              | public GoodsClassVO getUpper(GoodsClassVO current)<br/>public ArrayList<GoodsClassVO> getLower(GoodsClassVO current)<br/>public GoodsClassVO getUpper(GoodsVO current)<br/> |
| 前置条件                            | StockDataServicet 已经创建                   |
| 后置条件                            | 调用GoodsList里的getUpper,getLower           |
| **GoodsList.import**            |                                          |
| 语法                              | public boolean import(ArrayList<Goods> importList) |
| 前置条件                            | 无                                        |
| 后置条件                            | 调用modify方法                               |
| **GoodsList.export**            |                                          |
| 语法                              | public boolean export(ArrayList<Goods> exportList) |
| 前置条件                            | 无                                        |
| 后置条件                            | 调用modify方法                               |






**需接口：**

| **服务名**                                  | 服务               |
| ---------------------------------------- | ---------------- |
| StockDataService.add(GoodsClass current) | 添加一个商品分类         |
| StockDataService.add(Goods current)      | 添加一个商品           |
| StockDataService.deleteOne(GoodsClass current) | 删除一个分类           |
| StockDataService.deleteAll(GoodsClass current) | 删除一个分类及下面的所有分类   |
| StockDataService.delete(Goods current)   | 删除一个商品           |
| StockDataService.modify(Goods current)   | 修改一个商品           |
| StockDataService.modify(GoodsClass current) | 修改一个商品分类         |
| StockDataService.search(String nameOrID) | 以名称或id，搜索满足要求的商品 |
| StockDataService.getRoot()               | 返回初始的分类根节点       |
| StockDataService.getUpper(Goods current) | 得到商品的上级分类        |
| StockDataService.getUpper(GoodsClass current) | 得到商品的分类的上级分类     |
| StockDataService.getLower(GoodsClass current) | 得到商品分类的下级分类      |
| StockDataService.getRoot()               | 得到商品树的起始点        |



**PortSearch的接口规范：**

**供接口:**

| **PortSearch.lookOver** |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public boolean lookOver(Date begin ,Date end) |
| 前置条件                    | QuestionInfo 创建                          |
| 后置条件                    | 调用QuestionInfo中的getReceipts方法            |
| **PortSearch.examine**  |                                          |
| 语法                      | public boolean lookOver(Date begin ,Date end) |
| 前置条件                    | QuestionInfo 创建                          |
| 后置条件                    | 调用QuestionInfo中的getReceipts方法            |





**需接口：**

| **服务名**                                  | 服务      |
| ---------------------------------------- | ------- |
| **QuestionInfo.getReceipt(Date begin,Date end)** | 搜索进出货单据 |



#### （4）业务逻辑层的动态模型 ####


**顺序图如下所示：**





**GoodsList part**

![stock GoodsList顺序图](C:\Users\lzb\Desktop\colleage\软工2\4-stars-on-the-rooftop\详细设计阶段1\lzb\stock GoodsList顺序图.png)

**PortSearch part**









![Stock PortSearch 顺序图](C:\Users\lzb\Desktop\colleage\软工2\4-stars-on-the-rooftop\详细设计阶段1\lzb\Stock PortSearch 顺序图.png)



**Other module part**



![stock other module 顺序图](C:\Users\lzb\Desktop\colleage\软工2\4-stars-on-the-rooftop\详细设计阶段1\lzb\stock other module 顺序图.png)

#### （5）业务逻辑层的设计原理 ####

利用委托式风格，通过不同的controller 分给 不同的 domain object

<br/>

#### 4.1.2 receiptBL模块 ####

---


##### 4.1.2.1 FinanceFormBL模块 #####

###### （1）模块概述 ######

模块承担财务人员制定财务类单据、总经理审批、编辑财务类单据，其他功能查询调用财务类单据的需求。
详见需求规格说明文档<br/>
模块的职责是提供对财务类数据的增删改查操作，以及在制定财务类单据时提供客户、账户、金额信息的反馈。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现BLservice层的FinanceFormBLService，通过FinanceFormBL类完成业务操作，FinanceFormController类实现了隔离业务逻辑职责与逻辑控制职责。与UI层通过FinanceFormVO通信，与Data层通过FinancePO通信，同时通过userInfo、customerInfo、accountInfo三个接口获取userVO、customerVO、accountVO数据。
transItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作，同时封装了计算总额的方法。
transItem是转账信息，包含金额，账户，备注，并提供get与set方法。
<br/><br/>
**设计如图所示**
<br/><br/>
**各个类的职责**
<br/>

| 模块                    | 职责                                       |
| --------------------- | ---------------------------------------- |
| FinanceFormController | 负责实现财务类单据界面与层间接口FinanceInfo对应的服务         |
| FinanceFormBL         | 财务类单据的领域模型对象，拥有一张财务类单据的编号、时间、客户、操作员、转账条目表信息，帮助财务类单据界面完成所需要的服务 |
| transItemList         | 转账条目表，持有一个财务类单据的所有转账条目，并封装了增删改方法         |
| transItem             | 转账条目，封装了一项转账条目的金额、账户、备注，并封装了get、set方法    |

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**FinanceFormController供需接口：**
<br/>


| 供接口                                      |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
|                                          |      |                                          |
| **FinanceFormController.getForm**        | 语法   | public FormVO getForm(String id)         |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的getForm方法                |
| **FinanceFormController.addForm**        | 语法   | public boolean addForm(FormVO toPush)    |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的addForm方法                |
| **FinanceFormController.admitForm**      | 语法   | public boolean admitForm(FormVO toPush)  |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的admitFormForm方法          |
| **FinanceFormController.modifyForm**     | 语法   | public boolean modifyForm(FormVO toPush) |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的modifyForm方法             |
| **FinanceFormController.changeState**    | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的changeState方法            |
| **FinanceFormController.searchForm**     | 语法   | public boolean searchForm(FormVO form)   |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormBL的searchForm方法             |
| **FinanceFormController.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                          | 后置条件 | 调用FinanceFormBL的getCustomerList方法        |
| **FinanceFormController.getAccountList** | 语法   | public customerVO getAccountList()       |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                          | 后置条件 | 调用FinanceFormBL的getAccountList方法         |
|                                          |      |                                          |
| **需接口**                                  |      |                                          |
| 服务名                                      |      | 服务                                       |
| **FinanceFormBL.getForm**                |      | 获取一个财务类单据                                |
| **FinanceFormBL.addForm**                |      | 添加一个财务类单据                                |
| **FinanceFormBL.admitForm**              |      | 提交一个财务类单据                                |
| **FinanceFormBL.modifyForm**             |      | 编辑一个财务类单据                                |
| **FinanceFormBL.searchForm**             |      | 搜索得到所有符合条件的财务类单据                         |
| **FinanceFormBL.changeState**            |      | 改变一个财务类单据的状态                             |
| **FinanceFormBL.getCustomerList**        |      | 获取一份客户数据表                                |
| **FinanceFormBL.getAccountList**         |      | 获取一份银行账户数据表                              |







<br/><br/><br/>

**FinanceFormBL供需接口：**

<br/>

| 供接口                               |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
|                                   |      |                                          |
| **FinanceFormBL.getForm**         | 语法   | public FormVO getForm(String id)         |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的getForm方法                |
| **FinanceFormBL.addForm**         | 语法   | public boolean addForm(FormVO toPush)    |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的addForm方法                |
| **FinanceFormBL.admitForm**       | 语法   | public boolean admitForm(FormVO toPush)  |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的admitFormForm方法          |
| **FinanceFormBL.modifyForm**      | 语法   | public boolean modifyForm(FormVO toPush) |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的modifyForm方法             |
| **FinanceFormBL.searchForm**      | 语法   | public boolean searchForm(FormVO form)   |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的searchForm方法             |
| **FinanceFormBL.changeState**     | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                   | 后置条件 | 调用FinanceFormBL的changeState方法            |
| **FinanceFormBL.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                   | 后置条件 | 调用FinanceFormBL的getCustomerList方法        |
| **FinanceFormBL.getAccountList**  | 语法   | public customerVO getAccountList()       |
|                                   | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                   | 后置条件 | 调用FinanceFormBL的getAccountList方法         |
|                                   |      |                                          |
| **需接口**                           |      |                                          |
| 服务名                               |      | 服务                                       |
| **customerBL.getCustomerList**    |      | 获取一份客户清单                                 |
| **accountBL.getAccountList**      |      | 获取一份银行账户清单                               |
| **FinanceFormData.getForm**       |      | 获取一份财务类单据                                |
| **FinanceFormData.addForm**       |      | 添加一份财务类单据                                |
| **FinanceFormData.searchForm**    |      | 搜索得到所有符合条件的财务类单据                         |
| **FinanceFormData.modifyForm**    |      | 修改一份财务类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>

##### 4.1.2.2 StockFormBL模块 #####

###### （1）模块概述 ######

模块承担库存管理人员制定库存类单据，总经理审批、编辑库存类单据，其他功能查询调用库存类单据的需求。
详见需求规格说明文档<br/>
模块的职责是提供对库存类数据的增删改查操作，以及在制定库存类单据时提供商品信息的反馈。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现BLservice层的StockFormBLService，通过StockFormBL类完成业务操作，StockFormController类实现了隔离业务逻辑职责与逻辑控制职责。与UI层通过StockFormVO通信，与Data层通过StockPO通信，同时通过userInfo、customerInfo、accountInfo三个接口获取userVO、customerVO、accountVO数据。
GoodsItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作，同时封装了计算总额的方法。
GoodsItem是转账信息，包含金额，账户，备注，并提供get与set方法。
<br/><br/>
**设计如图所示**
<br/><br/>
**各个类的职责**
<br/>

| 模块                  | 职责                                       |
| ------------------- | ---------------------------------------- |
| StockFormController | 负责实现库存类单据界面与层间接口StockInfo对应的服务           |
| StockFormBL         | 库存类单据的领域模型对象，拥有一张库存类单据的编号、时间、客户、操作员、商品条目表信息，帮助库存类单据界面完成所需要的服务 |
| GoodsItemList       | 商品条目表，持有一个库存类单据的所有商品条目，并封装了增删改方法         |
| GoodsItem           | 商品条目，封装了一项商品条目的金额、账户、备注，并封装了get、set方法    |

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**StockFormController供需接口：**
<br/>


| 供接口                                     |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
|                                         |      |                                          |
| **StockFormController.getForm**         | 语法   | public FormVO getForm(String id)         |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的getForm方法                  |
| **StockFormController.addForm**         | 语法   | public boolean addForm(FormVO toPush)    |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的addForm方法                  |
| **StockFormController.admitForm**       | 语法   | public boolean admitForm(FormVO toPush)  |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的admitFormForm方法            |
| **StockFormController.modifyForm**      | 语法   | public boolean modifyForm(FormVO toPush) |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的modifyForm方法               |
| **StockFormController.changeState**     | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的changeState方法              |
| **StockFormController.searchForm**      | 语法   | public boolean searchForm(FormVO form)   |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormBL的searchForm方法               |
| **StockFormController.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                         | 前置条件 | 已创建一个StockForm领域对象                       |
|                                         | 后置条件 | 调用StockFormBL的getCustomerList方法          |
| **StockFormController.getGoodsList**    | 语法   | public GoodsVO getGoodsList()            |
|                                         | 前置条件 | 已创建一个StockForm领域对象                       |
|                                         | 后置条件 | 调用StockFormBL的getGoodsList方法             |
|                                         |      |                                          |
| **需接口**                                 |      |                                          |
| 服务名                                     |      | 服务                                       |
| **StockFormBL.getForm**                 |      | 获取一个库存类单据                                |
| **StockFormBL.addForm**                 |      | 添加一个库存类单据                                |
| **StockFormBL.admitForm**               |      | 提交一个库存类单据                                |
| **StockFormBL.modifyForm**              |      | 编辑一个库存类单据                                |
| **StockFormBL.searchForm**              |      | 搜索得到所有符合条件的库存类单据                         |
| **StockFormBL.changeState**             |      | 改变一个库存类单据的状态                             |
| **StockFormBL.getCustomerList**         |      | 获取一份客户数据表                                |
| **StockFormBL.getGoodsList**            |      | 获取一份商品数据表                                |







<br/><br/><br/>

**StockFormBL供需接口：**

<br/>

| 供接口                             |      |                                          |
| ------------------------------- | ---- | ---------------------------------------- |
|                                 |      |                                          |
| **StockFormBL.getForm**         | 语法   | public FormVO getForm(String id)         |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的getForm方法                  |
| **StockFormBL.addForm**         | 语法   | public boolean addForm(FormVO toPush)    |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的addForm方法                  |
| **StockFormBL.admitForm**       | 语法   | public boolean admitForm(FormVO toPush)  |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的admitFormForm方法            |
| **StockFormBL.modifyForm**      | 语法   | public boolean modifyForm(FormVO toPush) |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的modifyForm方法               |
| **StockFormBL.searchForm**      | 语法   | public boolean searchForm(FormVO form)   |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的searchForm方法               |
| **StockFormBL.changeState**     | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                 | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用StockFormBL的changeState方法              |
| **StockFormBL.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                 | 前置条件 | 已创建一个StockForm领域对象                       |
|                                 | 后置条件 | 调用StockFormBL的getCustomerList方法          |
| **StockFormBL.getGoodsList**    | 语法   | public GoodsVO getGoodsList()            |
|                                 | 前置条件 | 已创建一个StockForm领域对象                       |
|                                 | 后置条件 | 调用StockFormBL的getAccountList方法           |
|                                 |      |                                          |
| **需接口**                         |      |                                          |
| 服务名                             |      | 服务                                       |
| **customerBL.getCustomerList**  |      | 获取一份客户清单                                 |
| **GoodsBL.getGoodsList**        |      | 获取一份商品清单                                 |
| **StockFormData.getForm**       |      | 获取一份库存类单据                                |
| **StockFormData.addForm**       |      | 添加一份库存类单据                                |
| **StockFormData.searchForm**    |      | 搜索得到所有符合条件的库存类单据                         |
| **StockFormData.modifyForm**    |      | 修改一份库存类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>







##### 4.1.2.3 TradeFormBL模块 #####

###### （1）模块概述 ######

模块承担销售人员制定销售类单据，总经理审批、编辑销售类单据，其他功能查询调用销售类单据的需求。
详见需求规格说明文档<br/>
模块的职责是提供对销售类数据的增删改查操作，以及在制定销售类单据时提供商品信息的反馈。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现BLservice层的TradeFormBLService，通过TradeFormBL类完成业务操作，TradeFormController类实现了隔离业务逻辑职责与逻辑控制职责。与UI层通过TradeFormVO通信，与Data层通过TradePO通信，同时通过userInfo、customerInfo、accountInfo三个接口获取userVO、customerVO、accountVO数据。
GoodsItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作，同时封装了计算总额的方法。
GoodsItem是商品信息，包含商品编号、型号、数量、单价、金额、备注，其中金额由（单价*数量）得到，其他的提供get与set方法。

<br/><br/>

**设计如图所示**

<br/><br/>

**各个类的职责**

<br/>

| 模块                  | 职责                                       |
| ------------------- | ---------------------------------------- |
| TradeFormController | 负责实现销售类单据界面与层间接口TradeInfo对应的服务           |
| TradeFormBL         | 销售类单据的领域模型对象，拥有一张销售类单据的编号、时间、客户、操作员、商品条目表信息，帮助销售类单据界面完成所需要的服务 |
| GoodsItemList       | 商品条目表，持有一个销售类单据的所有商品条目，并封装了增删改方法         |
| GoodsItem           | 商品条目，封装了一项商品条目的金额、账户、备注，并封装了get、set方法    |

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**TradeFormController供需接口：**
<br/>


| 供接口                                     |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
|                                         |      |                                          |
| **TradeFormController.getForm**         | 语法   | public FormVO getForm(String id)         |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的getForm方法                  |
| **TradeFormController.addForm**         | 语法   | public boolean addForm(FormVO toPush)    |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的addForm方法                  |
| **TradeFormController.admitForm**       | 语法   | public boolean admitForm(FormVO toPush)  |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的admitFormForm方法            |
| **TradeFormController.modifyForm**      | 语法   | public boolean modifyForm(FormVO toPush) |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的modifyForm方法               |
| **TradeFormController.changeState**     | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的changeState方法              |
| **TradeFormController.searchForm**      | 语法   | public boolean searchForm(FormVO form)   |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormBL的searchForm方法               |
| **TradeFormController.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                         | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                         | 后置条件 | 调用TradeFormBL的getCustomerList方法          |
| **TradeFormController.getGoodsList**    | 语法   | public GoodsVO getGoodsList()            |
|                                         | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                         | 后置条件 | 调用TradeFormBL的getGoodsList方法             |
|                                         |      |                                          |
| **需接口**                                 |      |                                          |
| 服务名                                     |      | 服务                                       |
| **TradeFormBL.getForm**                 |      | 获取一个销售类单据                                |
| **TradeFormBL.addForm**                 |      | 添加一个销售类单据                                |
| **TradeFormBL.admitForm**               |      | 提交一个销售类单据                                |
| **TradeFormBL.modifyForm**              |      | 编辑一个销售类单据                                |
| **TradeFormBL.searchForm**              |      | 搜索得到所有符合条件的销售类单据                         |
| **TradeFormBL.changeState**             |      | 改变一个销售类单据的状态                             |
| **TradeFormBL.getCustomerList**         |      | 获取一份客户数据表                                |
| **TradeFormBL.getGoodsList**            |      | 获取一份商品数据表                                |







<br/><br/><br/>

**TradeFormBL供需接口：**

<br/>

| 供接口                             |      |                                          |
| ------------------------------- | ---- | ---------------------------------------- |
|                                 |      |                                          |
| **TradeFormBL.getForm**         | 语法   | public FormVO getForm(String id)         |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的getForm方法                  |
| **TradeFormBL.addForm**         | 语法   | public boolean addForm(FormVO toPush)    |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的addForm方法                  |
| **TradeFormBL.admitForm**       | 语法   | public boolean admitForm(FormVO toPush)  |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的admitFormForm方法            |
| **TradeFormBL.modifyForm**      | 语法   | public boolean modifyForm(FormVO toPush) |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的modifyForm方法               |
| **TradeFormBL.searchForm**      | 语法   | public boolean searchForm(FormVO form)   |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的searchForm方法               |
| **TradeFormBL.changeState**     | 语法   | public boolean changeState(FormVO form, StateOfForm newState) |
|                                 | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                 | 后置条件 | 调用TradeFormBL的changeState方法              |
| **TradeFormBL.getCustomerList** | 语法   | public customerVO getCustomerList()      |
|                                 | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                 | 后置条件 | 调用TradeFormBL的getCustomerList方法          |
| **TradeFormBL.getGoodsList**    | 语法   | public GoodsVO getGoodsList()            |
|                                 | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                 | 后置条件 | 调用TradeFormBL的getAccountList方法           |
|                                 |      |                                          |
| **需接口**                         |      |                                          |
| 服务名                             |      | 服务                                       |
| **customerBL.getCustomerList**  |      | 获取一份客户清单                                 |
| **GoodsBL.getGoodsList**        |      | 获取一份商品清单                                 |
| **TradeFormData.getForm**       |      | 获取一份销售类单据                                |
| **TradeFormData.addForm**       |      | 添加一份销售类单据                                |
| **TradeFormData.searchForm**    |      | 搜索得到所有符合条件的销售类单据                         |
| **TradeFormData.modifyForm**    |      | 修改一份销售类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>

#### 4.1.3reportBL模块



##### （1） 模块概述

**stockBL模块承担的需求，及职责和接口如下：**

**需求：**

1. 查看经营情况表
2. 查看经营历程表
3. 查看销售明细表
4. 期初建账



**职责：**





##### （2）整体结构

##### （3）模块内部类的接口

##### （4）业务逻辑层的动态模型

##### （5）业务逻辑层的设计原理



<br/>

#### 4.1.4 strategyBL模块 ####

---

#### （1）模块概述 ####
 strategyBL模块承担的需求，及职责和接口如下：

    1. 需求：负责制定销售策略，实现对销售策略的增删改查等操作。
    2. 职责：负责实现销售策略界面所需要的服务
    3. 接口： strategyBLService && strategyDataService（详见体系结构文档）


#### （2）整体结构  ####
strategyBL模块设计如图：


| **类**              |                  **职责**                  |
| ------------------ | :--------------------------------------: |
| strategy           |                是销售策略的实体类                 |
| strategyList       |          负责维护系统中的策略列表，功能有增删改查等           |
| strategyController | 负责实现strategyBLService 接口，并作为控制器，分配职责，控制协作 |
| toCustomer         |           负责实现不同客户级别销售策略的增删改操作           |
| toGoods            |            负责实现组合商品销售策略的增删改操作            |
| toTotal            |            负责实现总额促销策略 的增删改操作             |


#### （3）模块内部类的接口规范 ####

**StrategyController 类的接口：**

**供接口：**

| **StockController.newStra**     |                                      |
| ------------------------------- | ------------------------------------ |
| 语法                              | public boolean newStr()              |
| 前置条件                            | strategyList 已经创建                    |
| 后置条件                            | 调用strategyList里的add方法                |
| **StrategyController.editStra** |                                      |
| 语法                              | public boolean editStra()            |
| 前置条件                            | strategyList 已经创建                    |
| 后置条件                            | 调用strategyList里的modify方法             |
| **StrategyController.delStra**  |                                      |
| 语法                              | public boolean delStra()             |
| 前置条件                            | strategyList 已经创建                    |
| 后置条件                            | 调用strategyList里的delete方法             |
| **StrategyController.search**   |                                      |
| 语法                              | public ArrayList<> search(String ID) |
| 前置条件                            | strategyList 已经创建                    |
| 后置条件                                  | 调用strategyList里的search方法   


**StrategyList 类的接口：**

**供接口：**

| **StrategyList.add**    |                                          |
| ----------------------- | ---------------------------------------- |
| 语法                      | public boolean add(strategyVO s)         |
| 前置条件                    | strategyDataService已经被创建                 |
| 后置条件                    | 调用strategy的add方法                         |
| **StrategyList.modify** |                                          |
| 语法                      | public boolean modify(strategyVO s)      |
| 前置条件                    | strategyDataService已经被创建                 |
| 后置条件                    | 调用strategyDataService里的modify方法          |
| **StrategyList.delete** |                                          |
| 语法                      | public boolean delete(strategyVO s)      |
| 前置条件                    | strategyDataService已经被创建                 |
| 后置条件                    | 调用strategyDataService里的delete方法          |
| **StrategyList.search** |                                          |
| 语法                      | public ArrayList<strategyVO> search(String ID) |
| 前置条件                    | strategyDataService已经被创建                 |
| 后置条件                    | 调用strategyDataService里的search方法          |

**需接口：**
| 服务名                        | 服务                     |
| -------------------------- | ---------------------- |
| strategyDataService.add    | 增加一个新的销售策略             |
| strategyDataService.modify | 编辑一个销售策略的信息            |
| strategyDataService.delete | 删除一个已有的销售策略            |
| strategyDataService.search | 根据一个销售策略的ID查看销售策略的详细信息 |



#### 4.1.5 userBL模块 ####

---

#### （1）模块概述 ####

   userBL模块承担的需求参见需求规格说明文档功能需求及相关非功能需求
   userBL模块的职责及接口参见体系结构文档


#### （2）整体结构  ####
userBL模块设计如图：




| **类**          |                **职责**                 |
| -------------- | :-----------------------------------: |
| userController | 负责实现userBLService 接口，并作为控制器，分配职责，控制协作 |
| userList       |            负责维护系统中的用户信息列表             |
| user           |   系统用户的领域模型对象，拥有用户数据的id与密码，可以解决登录问题   |


#### （3）模块内部类的接口规范 ####

**userController 类的接口：**

**供接口：**





|**userController.login**|     |
|------|------|
|语法|public boolean login(String id,String password)
|前置条件|已创建一个user领域对象，且用户输入有效的用户id和password

| 后置条件 | 调用user领域对象的login方法 |
| ---- | ------------------ |
|      |                    |

**需接口：**


**user类的接口**
**供接口**
|**user.login**|      |
|语法|public boolean login(String id,String password)
|前置条件|用户输入有效的用户id和password。
|后置条件|根据ID查找是否存在相应的用户，根据输入的password返回登录验证的结果，如果通过验证，则记录当前用户。|

**需接口**

| 服务名                     | 服务                         |
| ----------------------- | -------------------------- |
| userDataService.search  | 根据id查找用户信息。                |
| userDataService.compare | 验证用户输入id与密码是否匹配，返回验证结果     |
| userDataService.role    | 根据用户输入的id确定用户身份，并授予用户相应的权限 |



**userList 类的接口：**

**供接口：**
| **userList.add** |                               |
| ---------------- | ----------------------------- |
| 语法               | public boolean add(String id) |
| 前置条件             | userDataService已经被创建          |
| 后置条件             | 调用userDataService中的add方法      |

| **userList.modify** |                               |
| ------------------- | ----------------------------- |
| 语法                  | public boolean modify(userVO) |
| 前置条件                | userDataService已经被创建          |
| 后置条件                | 调用userDataService中的modify方法   |

| **userList.delete** |                                  |
| ------------------- | -------------------------------- |
| 语法                  | public boolean delete(string id) |
| 前置条件                | userDataService已经被创建             |
| 后置条件                | 调用userDataService中的delete方法      |

**需接口：**
| 服务名                               | 服务          |
| --------------------------------- | ----------- |
| userDataService.add（String id）    | 增加一个用户      |
| userDataService.modify（String id） | 修改一个用户的信息   |
| userDataService.delete（String id） | 删除一个已有用户的信息 |

#### 4.1.6 CustomerBL模块 ####
---

#### （1）模块概述 ####
 CustomerBL模块承担的需求，及职责和接口如下：

    1. 需求：顾客管理（增、删、改、查）
    2. 职责：负责实现顾客管理界面所需要的服务
    3. 接口： CustomerBLService && CustomerDataService

#### （2）整体结构  ####

CustomerBL模块设计如图：
![Customer module](.\Customer module.png)


| **类**              |                  **职责**                  |
| ------------------ | :--------------------------------------: |
| Customer           |                 是顾客的实体类                  |
| CustomerBL         |          负责维护系统中的顾客列表，功能有增删改查等           |
| CustomerController | 负责实现CustomerBLService 接口，并作为控制器，分配职责，控制协作 |


| **接口** | 操作方法 | 职责   |
| ------ | ---- | ---- |
|        |      |      |
|        |      |      |

#### （3）模块内部类的接口规范 ####

**CustomerController 类的接口：**


| 供接口                                    |                                          |      |
| -------------------------------------- | ---------------------------------------- | ---- |
|                                        |                                          |      |
| **CustomerController.add**             |                                          |      |
| 语法                                     | public boolean add(CustomerVO newCustomer) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的addCustomer方法              |      |
| **CustomerController.getCustomerList** |                                          |      |
| 语法                                     | public ArrayList<Customer> getCustomerList(String idOrName) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的getCustomerList方法          |      |
| **CustomerController.getCustomer**     |                                          |      |
| 语法                                     | public ArrayList<Customer> getCustomer(String id) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的getCustomer方法              |      |
| **CustomerController.searchList**      |                                          |      |
| 语法                                     | public ArrayList<Customer> searchList(String idOrName) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的searchCustomerList方法       |      |
| **CustomerController.modify**          |                                          |      |
| 语法                                     | public boolean modify(CustomerVO newCustomer) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的modifyCustomer方法           |      |
| **CustomerController.delete**          |                                          |      |
| 语法                                     | public boolean delete(CustomerVO newCustomer) |      |
| 前置条件                                   | 已创建一个CustomerBL领域对象，并且输入符合规则             |      |
| 后置条件                                   | 调用CustomerBL里的deleteCustomer方法           |      |

| **需接口**                        |      |            |
| ------------------------------ | ---- | ---------- |
| 服务名                            |      | 服务         |
| **customerBL.getCustomerList** |      | 获得所有客户对象列表 |
| **customerBL.add**             |      | 新增一个客户对象   |
| **customerBL.modify**          |      | 修改一个客户对象   |
| **customerBL.delete**          |      | 删除一个客户对象   |


**CustomerBL 类的接口：**


| 供接口                            |                                          |      |
| ------------------------------ | ---------------------------------------- | ---- |
|                                |                                          |      |
| **CustomerBL.addCustomer**     |                                          |      |
| 语法                             | public boolean addCustomer(CustomerVO newCustomer) |      |
| 前置条件                           | 已创建一个CustomerDataService领域对象，并且输入符合规则    |      |
| 后置条件                           | 调用StockDataService里的addCustomer方法        |      |
| **CustomerBL.getCustomerList** |                                          |      |
| 语法                             | public ArrayList<Customer> getCustomerList(String idOrName) |      |
| 前置条件                           | 已创建一个CustomerDataService领域对象，并且输入符合规则    |      |
| 后置条件                           | 调用CustomerDataService里的getCustomerList方法 |      |
| **CustomerBL.getCustomer**     |                                          |      |
| 语法                             | public ArrayList<Customer> getCustomer(String id) |      |
| 前置条件                           | 已创建一个CustomerDataService领域对象，并且输入符合规则    |      |
| 后置条件                           | 调用CustomerDataService里的getCustomer方法     |      |
| **CustomerBL.modifyCustomer**  |                                          |      |
| 语法                             | public boolean modifyCustomer(CustomerVO newCustomer) |      |
| 前置条件                           | 已创建一个CustomerDataService领域对象，并且输入符合规则    |      |
| 后置条件                           | 调用CustomerDataService里的modifyCustomer方法  |      |
| **CustomerBL.deleteCustomer**  |                                          |      |
| 语法                             | public boolean delete(CustomerVO newCustomer) |      |
| 前置条件                           | 已创建一个CustomerDataService领域对象，并且输入符合规则    |      |
| 后置条件                           | 调用CustomerDataService里的deleteCustomer方法  |      |

| **需接口**                                 |      |          |
| --------------------------------------- | ---- | -------- |
| 服务名                                     |      | 服务       |
| **customerDataService.getCustomerList** |      | 获得客户对象列表 |
| **customerDataService.getCustomer**     |      | 获得客户对象   |
| **customerDataService.addCustomer**     |      | 新增一个客户对象 |
| **customerDataService.modifyCustomer**  |      | 修改一个客户对象 |
| **customerDataService.deleteCustomer**  |      | 删除一个客户对象 |


#### （4）业务逻辑层的动态模型 ####
每一个动作的顺序图，状态图
#### （5）业务逻辑层的设计原理 ####

#### 4.1.7 AccountBL模块 ####
---

#### （1）模块概述 ####
 AccountBL模块承担的需求，及职责和接口如下：

    1. 需求：账户管理（增、删、改、查）
    2. 职责：负责实现账户管理界面所需要的服务
    3. 接口： AccountBLService && AccountDataService

#### （2）整体结构  ####

AccountBL模块设计如图：
![Account module](.\Account module.png)


| **类**             |                  **职责**                  |
| ----------------- | :--------------------------------------: |
| Account           |                 是顾客的实体类                  |
| AccountBL         |          负责维护系统中的顾客列表，功能有增删改查等           |
| AccountController | 负责实现AccountBLService 接口，并作为控制器，分配职责，控制协作 |


| **接口** | 操作方法 | 职责   |
| ------ | ---- | ---- |
|        |      |      |
|        |      |      |

#### （3）模块内部类的接口规范 ####

**AccountController 类的接口：**


| 供接口                                  |                                          |      |
| ------------------------------------ | ---------------------------------------- | ---- |
|                                      |                                          |      |
| **AccountController.add**            |                                          |      |
| 语法                                   | public boolean add(AccountVO newAccount) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的addAccount方法                |      |
| **AccountController.getAccountList** |                                          |      |
| 语法                                   | public ArrayList<Account> getAccountList(String idOrName) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的getAccountList方法            |      |
| **AccountController.getAccount**     |                                          |      |
| 语法                                   | public ArrayList<Account> getAccount(String id) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的getAccount方法                |      |
| **AccountController.searchList**     |                                          |      |
| 语法                                   | public ArrayList<Account> searchList(String idOrName) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的searchAccountList方法         |      |
| **AccountController.modify**         |                                          |      |
| 语法                                   | public boolean modify(AccountVO newAccount) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的modifyAccount方法             |      |
| **AccountController.delete**         |                                          |      |
| 语法                                   | public boolean delete(AccountVO newAccount) |      |
| 前置条件                                 | 已创建一个AccountBL领域对象，并且输入符合规则              |      |
| 后置条件                                 | 调用AccountBL里的deleteAccount方法             |      |

| **需接口**                         |      |            |
| ------------------------------- | ---- | ---------- |
| 服务名                             |      | 服务         |
| **accountBL.getAccountList**    |      | 获得所有客户对象列表 |
| **accountBL.getAccount**        |      | 获得指定客户对象   |
| **accountBL.searchAccountList** |      | 获得相关客户对象列表 |
| **accountBL.addAccount**        |      | 新增一个客户对象   |
| **accountBL.modifyAccount**     |      | 修改一个客户对象   |
| **accountBL.deleteAccount**     |      | 删除一个客户对象   |


**AccountBL 类的接口：**


| 供接口                          |                                          |      |
| ---------------------------- | ---------------------------------------- | ---- |
|                              |                                          |      |
| **AccountBL.addAccount**     |                                          |      |
| 语法                           | public boolean addAccount(AccountVO newAccount) |      |
| 前置条件                         | 已创建一个AccountDataService领域对象，并且输入符合规则     |      |
| 后置条件                         | 调用StockDataService里的addAccount方法         |      |
| **AccountBL.getAccountList** |                                          |      |
| 语法                           | public ArrayList<Account> getAccountList(String idOrName) |      |
| 前置条件                         | 已创建一个AccountDataService领域对象，并且输入符合规则     |      |
| 后置条件                         | 调用AccountDataService里的getAccountList方法   |      |
| **AccountBL.getAccount**     |                                          |      |
| 语法                           | public ArrayList<Account> getAccount(String id) |      |
| 前置条件                         | 已创建一个AccountDataService领域对象，并且输入符合规则     |      |
| 后置条件                         | 调用AccountDataService里的getAccount方法       |      |
| **AccountBL.modifyAccount**  |                                          |      |
| 语法                           | public boolean modifyAccount(AccountVO newAccount) |      |
| 前置条件                         | 已创建一个AccountDataService领域对象，并且输入符合规则     |      |
| 后置条件                         | 调用AccountDataService里的modifyAccount方法    |      |
| **AccountBL.deleteAccount**  |                                          |      |
| 语法                           | public boolean delete(AccountVO newAccount) |      |
| 前置条件                         | 已创建一个AccountDataService领域对象，并且输入符合规则     |      |
| 后置条件                         | 调用AccountDataService里的deleteAccount方法    |      |

| **需接口**                               |      |          |
| ------------------------------------- | ---- | -------- |
| 服务名                                   |      | 服务       |
| **accountDataService.getAccountList** |      | 获得客户对象列表 |
| **accountDataService.getAccount**     |      | 获得客户对象   |
| **accountDataService.addAccount**     |      | 新增一个客户对象 |
| **accountDataService.modifyAccount**  |      | 修改一个客户对象 |
| **accountDataService.deleteAccount**  |      | 删除一个客户对象 |


#### （4）业务逻辑层的动态模型 ####
每一个动作的顺序图，状态图
#### （5）业务逻辑层的设计原理 ####

## 5.依赖视角 ##
客户端和服务器端的开发包图

### 5.1数据层的分解 ###

#### 5.1.1 receiptData模块 ####



#### 5.2.1 StockData层的分解 ####


<br/><br/>


#### 5.2.2 receiptData层的分解 ####



<br/><br/>

##### 5.2.2.1 FinanceFormData模块 #####

###### （1）模块概述 ######

模块承担财务类单据的数据需求，主要是对财务类单据的增删改查。
详见需求规格说明文档<br/>
模块的职责是提供对财务类单据数据的增删改查操作，以及这些单据数据的序列化保存。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现DataService层的FinanceFormDataService，通过FinanceFormList类完成数据操作，FinanceFormController类实现了隔离数据逻辑职责与逻辑控制职责。与Bl层通过FinanceFormPO通信。
transItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作。
transItem是转账信息，包含金额，账户，备注，并提供get与set方法。
<br/><br/>
**设计如图所示**
<br/><br/>
**各个类的职责**
<br/>

| 模块                    | 职责                                       |
| --------------------- | ---------------------------------------- |
| FinanceFormController | 负责实现财务类单据界面与层间接口FinanceInfo对应的服务         |
| FinanceForm           | 财务类单据的领域模型对象，拥有一张财务类单据的编号、时间、客户、操作员、转账条目表信息，帮助财务类单据界面完成所需要的服务 |
|FinanceFormList|财务类单据的集合，持有所有财务类单据，同时负责增删改查与序列化读写。是data层的核心类
|FinanceTransItemList|转账条目表，持有一个财务类单据的所有转账条目，并封装了增删改方法|
|FinanceTransItem|转账条目，封装了一项转账条目的金额、账户、备注，并封装了get、set方法|

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**FinanceFormController供需接口：**
<br/>


| 供接口                                      |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
|                                          |      |                                          |
| **FinanceFormController.getForm**        | 语法   | public FormPO getForm(String id)         |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的getForm方法              |
| **FinanceFormController.addForm**        | 语法   | public boolean addForm(FormPO toPush)    |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的addForm方法              |
| **FinanceFormController.admitForm**      | 语法   | public boolean admitForm(FormPO toPush)  |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的admitFormForm方法        |
| **FinanceFormController.modifyForm**     | 语法   | public boolean modifyForm(FormPO toPush) |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的modifyForm方法           |
| **FinanceFormController.changeState**    | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的changeState方法          |
| **FinanceFormController.searchForm**     | 语法   | public boolean searchForm(FormPO form)   |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                          | 后置条件 | 调用FinanceFormData的searchForm方法           |
| **FinanceFormController.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                          | 后置条件 | 调用FinanceFormData的getCustomerList方法      |
| **FinanceFormController.getAccountList** | 语法   | public customerPO getAccountList()       |
|                                          | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                          | 后置条件 | 调用FinanceFormData的getAccountList方法       |
|                                          |      |                                          |
| **需接口**                                  |      |                                          |
| 服务名                                      |      | 服务                                       |
| **FinanceFormList.getForm**              |      | 获取一个财务类单据                                |
| **FinanceFormList.addForm**              |      | 添加一个财务类单据                                |
| **FinanceFormList.admitForm**            |      | 提交一个财务类单据                                |
| **FinanceFormList.modifyForm**           |      | 编辑一个财务类单据                                |
| **FinanceFormList.searchForm**           |      | 搜索得到所有符合条件的财务类单据                         |
| **FinanceFormList.changeState**          |      | 改变一个财务类单据的状态                             |
| **FinanceFormList.getCustomerList**      |      | 获取一份客户数据表                                |
| **FinanceFormList.getAccountList**       |      | 获取一份银行账户数据表                              |







<br/><br/><br/>

**FinanceFormList供需接口：**

<br/>

| 供接口                                 |      |                                          |
| ----------------------------------- | ---- | ---------------------------------------- |
|                                     |      |                                          |
| **FinanceFormList.getForm**         | 语法   | public FormPO getForm(String id)         |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的getForm方法              |
| **FinanceFormList.addForm**         | 语法   | public boolean addForm(FormPO toPush)    |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的addForm方法              |
| **FinanceFormList.admitForm**       | 语法   | public boolean admitForm(FormPO toPush)  |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的admitFormForm方法        |
| **FinanceFormList.modifyForm**      | 语法   | public boolean modifyForm(FormPO toPush) |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的modifyForm方法           |
| **FinanceFormList.searchForm**      | 语法   | public boolean searchForm(FormPO form)   |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的searchForm方法           |
| **FinanceFormList.changeState**     | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象，并且输入符合规则            |
|                                     | 后置条件 | 调用FinanceFormList的changeState方法          |
| **FinanceFormList.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                     | 后置条件 | 调用FinanceFormList的getCustomerList方法      |
| **FinanceFormList.getAccountList**  | 语法   | public customerPO getAccountList()       |
|                                     | 前置条件 | 已创建一个FinanceForm领域对象                     |
|                                     | 后置条件 | 调用FinanceFormList的getAccountList方法       |
|                                     |      |                                          |
| **需接口**                             |      |                                          |
| 服务名                                 |      | 服务                                       |
| **customerData.getCustomerList**    |      | 获取一份客户清单                                 |
| **accountData.getAccountList**      |      | 获取一份银行账户清单                               |
| **FinanceFormList.getForm**         |      | 获取一份财务类单据                                |
| **FinanceFormList.addForm**         |      | 添加一份财务类单据                                |
| **FinanceFormList.searchForm**      |      | 搜索得到所有符合条件的财务类单据                         |
| **FinanceFormList.modifyForm**      |      | 修改一份财务类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>

<br/>

##### 5.2.2.2 StockFormData模块 #####

###### （1）模块概述 ######

模块承担库存类单据的数据需求，主要是对库存类单据的增删改查。
详见需求规格说明文档<br/>
模块的职责是提供对库存类单据数据的增删改查操作，以及这些单据数据的序列化保存。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现DataService层的StockFormDataService，通过StockFormList类完成数据操作，StockFormController类实现了隔离数据逻辑职责与逻辑控制职责。与Bl层通过StockFormPO通信。
goodsItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作。
goodsItem是转账信息，包含金额，账户，备注，并提供get与set方法。
<br/><br/>
**设计如图所示**
<br/><br/>
**各个类的职责**
<br/>

| 模块                  | 职责                                       |
| ------------------- | ---------------------------------------- |
| StockFormController | 负责实现库存类单据界面与层间接口StockInfo对应的服务           |
| StockForm           | 库存类单据的领域模型对象，拥有一张库存类单据的编号、时间、客户、操作员、商品条目表信息，帮助库存类单据界面完成所需要的服务 |
|StockFormList|库存类单据的集合，持有所有库存类单据，同时负责增删改查与序列化读写。是data层的核心类
|StockGoodsItemList|商品条目表，持有一个库存类单据的所有商品条目，并封装了增删改方法|
|StockGoodsItem|商品条目，封装了一项商品条目的编号、名称、型号、数量、单价、总额、备注，其中总额由（单价*数量）得到，其他有get、set方法|

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**StockFormController供需接口：**
<br/>


| 供接口                                     |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
|                                         |      |                                          |
| **StockFormController.getForm**         | 语法   | public FormPO getForm(String id)         |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的getForm方法                |
| **StockFormController.addForm**         | 语法   | public boolean addForm(FormPO toPush)    |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的addForm方法                |
| **StockFormController.admitForm**       | 语法   | public boolean admitForm(FormPO toPush)  |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的admitFormForm方法          |
| **StockFormController.modifyForm**      | 语法   | public boolean modifyForm(FormPO toPush) |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的modifyForm方法             |
| **StockFormController.changeState**     | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的changeState方法            |
| **StockFormController.searchForm**      | 语法   | public boolean searchForm(FormPO form)   |
|                                         | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用StockFormData的searchForm方法             |
| **StockFormController.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                         | 前置条件 | 已创建一个StockForm领域对象                       |
|                                         | 后置条件 | 调用StockFormData的getCustomerList方法        |
| **StockFormController.getGoodsList**    | 语法   | public customerPO getGoodsList()         |
|                                         | 前置条件 | 已创建一个StockForm领域对象                       |
|                                         | 后置条件 | 调用StockFormData的getGoodsList方法           |
|                                         |      |                                          |
| **需接口**                                 |      |                                          |
| 服务名                                     |      | 服务                                       |
| **StockFormList.getForm**               |      | 获取一个库存类单据                                |
| **StockFormList.addForm**               |      | 添加一个库存类单据                                |
| **StockFormList.admitForm**             |      | 提交一个库存类单据                                |
| **StockFormList.modifyForm**            |      | 编辑一个库存类单据                                |
| **StockFormList.searchForm**            |      | 搜索得到所有符合条件的库存类单据                         |
| **StockFormList.changeState**           |      | 改变一个库存类单据的状态                             |
| **StockFormList.getCustomerList**       |      | 获取一份客户数据表                                |
| **StockFormList.getGoodsList**          |      | 获取一份商品信息数据表                              |







<br/><br/><br/>

**StockFormList供需接口：**

<br/>

| 供接口                               |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
|                                   |      |                                          |
| **StockFormList.getForm**         | 语法   | public FormPO getForm(String id)         |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的getForm方法                |
| **StockFormList.addForm**         | 语法   | public boolean addForm(FormPO toPush)    |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的addForm方法                |
| **StockFormList.admitForm**       | 语法   | public boolean admitForm(FormPO toPush)  |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的admitFormForm方法          |
| **StockFormList.modifyForm**      | 语法   | public boolean modifyForm(FormPO toPush) |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的modifyForm方法             |
| **StockFormList.searchForm**      | 语法   | public boolean searchForm(FormPO form)   |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的searchForm方法             |
| **StockFormList.changeState**     | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                   | 前置条件 | 已创建一个StockForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用StockFormList的changeState方法            |
| **StockFormList.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                   | 前置条件 | 已创建一个StockForm领域对象                       |
|                                   | 后置条件 | 调用StockFormList的getCustomerList方法        |
| **StockFormList.getGoodsList**    | 语法   | public customerPO getGoodsList()         |
|                                   | 前置条件 | 已创建一个StockForm领域对象                       |
|                                   | 后置条件 | 调用StockFormList的getGoodsList方法           |
|                                   |      |                                          |
| **需接口**                           |      |                                          |
| 服务名                               |      | 服务                                       |
| **customerData.getCustomerList**  |      | 获取一份客户清单                                 |
| **accountData.getGoodsList**      |      | 获取一份商品信息清单                               |
| **StockFormList.getForm**         |      | 获取一份库存类单据                                |
| **StockFormList.addForm**         |      | 添加一份库存类单据                                |
| **StockFormList.searchForm**      |      | 搜索得到所有符合条件的库存类单据                         |
| **StockFormList.modifyForm**      |      | 修改一份库存类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>




<br/>

##### 5.2.2.3 TradeFormData模块 #####

###### （1）模块概述 ######

模块承担销售类单据的数据需求，主要是对销售类单据的增删改查。
详见需求规格说明文档<br/>
模块的职责是提供对销售类单据数据的增删改查操作，以及这些单据数据的序列化保存。<br/>
接口部分详见体系结构设计文档。<br/>
<br/>

###### （2）整体结构 ######

该模块需要实现DataService层的TradeFormDataService，通过TradeFormList类完成数据操作，TradeFormController类实现了隔离数据逻辑职责与逻辑控制职责。与Bl层通过TradeFormPO通信。
goodsItemList记录了所有的转账信息条目，并提供这些信息条目的增删改操作。
goodsItem是商品信息，封装了一项商品条目的编号、名称、型号、数量、单价、总额、备注，其中总额由（单价*数量）得到，其他有get、set方法|
<br/><br/>
**设计如图所示**
<br/><br/>
**各个类的职责**
<br/>

| 模块                  | 职责                                       |
| ------------------- | ---------------------------------------- |
| TradeFormController | 负责实现销售类单据界面与层间接口TradeInfo对应的服务           |
| TradeForm           | 销售类单据的领域模型对象，拥有一张销售类单据的编号、时间、客户、操作员、商品条目表信息，帮助销售类单据界面完成所需要的服务 |
|TradeFormList|销售类单据的集合，持有所有销售类单据，同时负责增删改查与序列化读写。是data层的核心类
|TradeGoodsItemList|商品条目表，持有一个销售类单据的所有商品条目，并封装了增删改方法|
|TradeGoodsItem|商品条目，封装了一项商品条目的编号、名称、型号、数量、单价、总额、备注，其中总额由（单价*数量）得到，其他有get、set方法|

<br/>

###### （3）模块内部类的接口规范 ######

<br/>

**TradeFormController供需接口：**
<br/>


| 供接口                                     |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
|                                         |      |                                          |
| **TradeFormController.getForm**         | 语法   | public FormPO getForm(String id)         |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的getForm方法                |
| **TradeFormController.addForm**         | 语法   | public boolean addForm(FormPO toPush)    |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的addForm方法                |
| **TradeFormController.admitForm**       | 语法   | public boolean admitForm(FormPO toPush)  |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的admitFormForm方法          |
| **TradeFormController.modifyForm**      | 语法   | public boolean modifyForm(FormPO toPush) |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的modifyForm方法             |
| **TradeFormController.changeState**     | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的changeState方法            |
| **TradeFormController.searchForm**      | 语法   | public boolean searchForm(FormPO form)   |
|                                         | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                         | 后置条件 | 调用TradeFormData的searchForm方法             |
| **TradeFormController.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                         | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                         | 后置条件 | 调用TradeFormData的getCustomerList方法        |
| **TradeFormController.getGoodsList**    | 语法   | public customerPO getGoodsList()         |
|                                         | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                         | 后置条件 | 调用TradeFormData的getGoodsList方法           |
|                                         |      |                                          |
| **需接口**                                 |      |                                          |
| 服务名                                     |      | 服务                                       |
| **TradeFormList.getForm**               |      | 获取一个销售类单据                                |
| **TradeFormList.addForm**               |      | 添加一个销售类单据                                |
| **TradeFormList.admitForm**             |      | 提交一个销售类单据                                |
| **TradeFormList.modifyForm**            |      | 编辑一个销售类单据                                |
| **TradeFormList.searchForm**            |      | 搜索得到所有符合条件的销售类单据                         |
| **TradeFormList.changeState**           |      | 改变一个销售类单据的状态                             |
| **TradeFormList.getCustomerList**       |      | 获取一份客户数据表                                |
| **TradeFormList.getGoodsList**          |      | 获取一份商品信息数据表                              |







<br/><br/><br/>

**TradeFormList供需接口：**

<br/>

| 供接口                               |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
|                                   |      |                                          |
| **TradeFormList.getForm**         | 语法   | public FormPO getForm(String id)         |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的getForm方法                |
| **TradeFormList.addForm**         | 语法   | public boolean addForm(FormPO toPush)    |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的addForm方法                |
| **TradeFormList.admitForm**       | 语法   | public boolean admitForm(FormPO toPush)  |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的admitFormForm方法          |
| **TradeFormList.modifyForm**      | 语法   | public boolean modifyForm(FormPO toPush) |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的modifyForm方法             |
| **TradeFormList.searchForm**      | 语法   | public boolean searchForm(FormPO form)   |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的searchForm方法             |
| **TradeFormList.changeState**     | 语法   | public boolean changeState(FormPO form, StateOfForm newState) |
|                                   | 前置条件 | 已创建一个TradeForm领域对象，并且输入符合规则              |
|                                   | 后置条件 | 调用TradeFormList的changeState方法            |
| **TradeFormList.getCustomerList** | 语法   | public customerPO getCustomerList()      |
|                                   | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                   | 后置条件 | 调用TradeFormList的getCustomerList方法        |
| **TradeFormList.getGoodsList**    | 语法   | public customerPO getGoodsList()         |
|                                   | 前置条件 | 已创建一个TradeForm领域对象                       |
|                                   | 后置条件 | 调用TradeFormList的getGoodsList方法           |
|                                   |      |                                          |
| **需接口**                           |      |                                          |
| 服务名                               |      | 服务                                       |
| **customerData.getCustomerList**  |      | 获取一份客户清单                                 |
| **accountData.getGoodsList**      |      | 获取一份商品信息清单                               |
| **TradeFormList.getForm**         |      | 获取一份销售类单据                                |
| **TradeFormList.addForm**         |      | 添加一份销售类单据                                |
| **TradeFormList.searchForm**      |      | 搜索得到所有符合条件的销售类单据                         |
| **TradeFormList.modifyForm**      |      | 修改一份销售类单据                                |

<br/>

###### （4）业务逻辑层的动态模型 ######

<br/>

如图所示


<br/><br/>

###### （5）业务逻辑层的设计原理 ######

利用委托式的设计风格，每种操作分派给不同的对象来完成。
同时尽量减少通信次数，提高速度


<br/>

##### 5.2.3.1 CustomerData模块

###### （1）模块概述

CustomerData模块承担客户的数据需求，主要是对顾客信息的增删改查。详见需求规格说明文档<br/>模块的职责是提供对顾客数据的增删改查操作，以及这些数据的序列化保存。<br/>接口部分详见体系结构设计文档。<br/><br/>

###### （2）整体结构

该模块需要实现DataService层的CustomerDataService，通过CustomerBL类完成数据操作，CustomerController类实现了隔离数据逻辑职责与逻辑控制职责。与Bl层通过CustomerPO通信。customerList记录了所有的顾客信息条目，并提供这些信息条目的增删改操作。customer是顾客信息，包含编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员，并提供get与set方法。<br/><br/>**设计如图所示**<br/><br/>**各个类的职责**<br/>

| 模块                 | 职责                                       |
| ------------------ | ---------------------------------------- |
| CustomerController | 负责实现库存类单据界面与层间接口StockInfo对应的服务           |
| Customer           | 库存类单据的领域模型对象，拥有一张库存类单据的编号、时间、客户、操作员、商品条目表信息，帮助库存类单据界面完成所需要的服务 |
| CustomerList       | 库存类单据的集合，持有所有库存类单据，同时负责增删改查与序列化读写。是data层的核心类 |

<br/>

###### （3）模块内部类的接口规范

<br/>

**CustomerController供需接口：**<br/>

| 供接口                                      |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
|                                          |      |                                          |
| **CustomerController.getCustomer**       | 语法   | public CustomerPO getCustomer(String id) |
|                                          | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                          | 后置条件 | 调用CustomerData的getCustomer方法             |
| **CustomerController.addCustomer**       | 语法   | public boolean addCustomer(CustomerPO toPush) |
|                                          | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                          | 后置条件 | 调用CustomerData的addCustomer方法             |
| **CustomerController.modifyCustomer**    | 语法   | public boolean modifyCustomer(CustomerPO toPush) |
|                                          | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                          | 后置条件 | 调用CustomerData的modifyCustomer方法          |
| **CustomerController.deleteCustomer**    | 语法   | public boolean deleteCustomer(CustomerPO toPush) |
|                                          | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                          | 后置条件 | 调用CustomerData的deleteCustomer方法          |
| **CustomerController.searchCustomerList** | 语法   | public boolean searchCustomerList(String idOrName) |
|                                          | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                          | 后置条件 | 调用CustomerData的searchCustomerList方法      |
| **CustomerController.getCustomerList**   | 语法   | public customerPO getCustomerList()      |
|                                          | 前置条件 | 已创建一个Customer领域对象                        |
|                                          | 后置条件 | 调用CustomerData的getCustomerList方法         |
| **需接口**                                  |      |                                          |
| 服务名                                      |      | 服务                                       |
| **CustomerList.getCustomer**             |      | 获取一个顾客信息                                 |
| **CustomerList.addCustomer**             |      | 添加一个顾客信息                                 |
| **CustomerList.modifyCustomer**          |      | 编辑一个顾客信息                                 |
| **CustomerList.deleteCustomer**          |      | 删除一个顾客信息                                 |
| **CustomerList.searchCustomer**          |      | 搜索得到所有符合条件的顾客信息                          |
| **CustomerList.getCustomerList**         |      | 获取一份客户数据表                                |

<br/><br/><br/>

**CustomerBL供需接口：**

<br/>

| 供接口                                 |      |                                          |
| ----------------------------------- | ---- | ---------------------------------------- |
|                                     |      |                                          |
| **CustomerBL.getForm**              | 语法   | public CustomerPO getCustomer(String id) |
|                                     | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                     | 后置条件 | 调用CustomerBL的getCustomer方法               |
| **CustomerBL.addForm**              | 语法   | public boolean addCustomer(CustomerPO toPush) |
|                                     | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                     | 后置条件 | 调用CustomerBL的addCustomer方法               |
| **CustomerList.modifyCustomer**     | 语法   | public boolean modifyCustomer(CustomerPO toPush) |
|                                     | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                     | 后置条件 | 调用CustomerList的modifyCustomer方法          |
| **CustomerList.searchCustomerList** | 语法   | public boolean searchCustomerList(CustomerPO form) |
|                                     | 前置条件 | 已创建一个Customer领域对象，并且输入符合规则               |
|                                     | 后置条件 | 调用CustomerList的searchCustomerList方法      |
| **CustomerList.getCustomerList**    | 语法   | public customerPO getCustomerList()      |
|                                     | 前置条件 | 已创建一个Customer领域对象                        |
|                                     | 后置条件 | 调用CustomerList的getCustomerList方法         |
|                                     |      |                                          |
| **需接口**                             |      |                                          |
| 服务名                                 |      | 服务                                       |
| **customerData.getCustomerList**    |      | 获取一份客户清单                                 |
| **CustomerList.getCustomer**        |      | 获取一份客户信息                                 |
| **CustomerList.addCustomer**        |      | 添加一份客户信息                                 |
| **CustomerList.searchCustomer**     |      | 搜索得到所有符合条件的客户信息                          |
| **CustomerList.modifyCustomer**     |      | 修改一份客户信息                                 |

<br/>

###### （4）业务逻辑层的动态模型

<br/>

如图所示

<br/><br/>

###### （5）业务逻辑层的设计原理

利用委托式的设计风格，每种操作分派给不同的对象来完成。同时尽量减少通信次数，提高速度

<br/>



##### 5.2.4.1 AccountData模块

###### （1）模块概述

AccountData模块承担账户的数据需求，主要是对账户信息的增删改查。详见需求规格说明文档<br/>模块的职责是提供对账户数据的增删改查操作，以及这些数据的序列化保存。<br/>接口部分详见体系结构设计文档。<br/><br/>

###### （2）整体结构

该模块需要实现DataService层的AccountDataService，通过AccountBL类完成数据操作，AccountController类实现了隔离数据逻辑职责与逻辑控制职责。与Bl层通过AccountPO通信。accountList记录了所有的账户信息条目，并提供这些信息条目的增删改操作。account是账户信息，包含编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员，并提供get与set方法。<br/><br/>**设计如图所示**<br/><br/>**各个类的职责**<br/>

| 模块                | 职责                                       |
| ----------------- | ---------------------------------------- |
| AccountController | 负责实现库存类单据界面与层间接口StockInfo对应的服务           |
| Account           | 库存类单据的领域模型对象，拥有一张库存类单据的编号、时间、账户、操作员、商品条目表信息，帮助库存类单据界面完成所需要的服务 |
| AccountList       | 库存类单据的集合，持有所有库存类单据，同时负责增删改查与序列化读写。是data层的核心类 |

<br/>

###### （3）模块内部类的接口规范

<br/>

**AccountController供需接口：**<br/>

| 供接口                                     |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
|                                         |      |                                          |
| **AccountController.getAccount**        | 语法   | public AccountPO getAccount(String id)   |
|                                         | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                         | 后置条件 | 调用AccountData的getAccount方法               |
| **AccountController.addAccount**        | 语法   | public boolean addAccount(AccountPO toPush) |
|                                         | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                         | 后置条件 | 调用AccountData的addAccount方法               |
| **AccountController.modifyAccount**     | 语法   | public boolean modifyAccount(AccountPO toPush) |
|                                         | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                         | 后置条件 | 调用AccountData的modifyAccount方法            |
| **AccountController.deleteAccount**     | 语法   | public boolean deleteAccount(AccountPO toPush) |
|                                         | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                         | 后置条件 | 调用AccountData的deleteAccount方法            |
| **AccountController.searchAccountList** | 语法   | public boolean searchAccountList(String idOrName) |
|                                         | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                         | 后置条件 | 调用AccountData的searchAccountList方法        |
| **AccountController.getAccountList**    | 语法   | public accountPO getAccountList()        |
|                                         | 前置条件 | 已创建一个Account领域对象                         |
|                                         | 后置条件 | 调用AccountData的getAccountList方法           |

| **需接口**                                 |      |                                          |
| 服务名                                     |      | 服务                                       |
| **AccountList.getAccount**               |      | 获取一个账户信息                                |
| **AccountList.addAccount**               |      | 添加一个账户信息                               |
| **AccountList.modifyAccount**            |      | 编辑一个账户信息                                |
| **AccountList.deleteAccount**            |      | 删除一个账户信息                                |
| **AccountList.searchAccount**            |      | 搜索得到所有符合条件的账户信息                         |
| **AccountList.getAccountList**       |      | 获取一份账户数据表                                |

<br/><br/><br/>

**AccountBL供需接口：**

<br/>

| 供接口                               |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
|                                   |      |                                          |
| **AccountBL.getForm**             | 语法   | public AccountPO getAccount(String id)   |
|                                   | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                   | 后置条件 | 调用AccountBL的getAccount方法                 |
| **AccountBL.addForm**             | 语法   | public boolean addAccount(AccountPO toPush) |
|                                   | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                   | 后置条件 | 调用AccountBL的addAccount方法                 |
| **AccountList.modifyAccount**     | 语法   | public boolean modifyAccount(AccountPO toPush) |
|                                   | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                   | 后置条件 | 调用AccountList的modifyAccount方法            |
| **AccountList.searchAccountList** | 语法   | public boolean searchAccountList(AccountPO form) |
|                                   | 前置条件 | 已创建一个Account领域对象，并且输入符合规则                |
|                                   | 后置条件 | 调用AccountList的searchAccountList方法        |
| **AccountList.getAccountList**    | 语法   | public accountPO getAccountList()        |
|                                   | 前置条件 | 已创建一个Account领域对象                         |
|                                   | 后置条件 | 调用AccountList的getAccountList方法           |
|                                   |      |                                          |
| **需接口**                           |      |                                          |
| 服务名                               |      | 服务                                       |
| **accountData.getAccountList**    |      | 获取一份账户清单                                 |
| **AccountList.getAccount**        |      | 获取一份账户信息                                 |
| **AccountList.addAccount**        |      | 添加一份账户信息                                 |
| **AccountList.searchAccount**     |      | 搜索得到所有符合条件的账户信息                          |
| **AccountList.modifyAccount**     |      | 修改一份账户信息                                 |

<br/>

###### （4）业务逻辑层的动态模型

<br/>

如图所示

<br/><br/>

###### （5）业务逻辑层的设计原理

利用委托式的设计风格，每种操作分派给不同的对象来完成。同时尽量减少通信次数，提高速度

<br/>